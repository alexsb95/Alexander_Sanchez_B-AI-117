(function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerCompanyPreferencesCollectionView,ref;return HackerCompanyPreferencesCollectionView=function(superClass){function HackerCompanyPreferencesCollectionView(){return HackerCompanyPreferencesCollectionView.__super__.constructor.apply(this,arguments)}return extend(HackerCompanyPreferencesCollectionView,superClass),HackerCompanyPreferencesCollectionView.prototype.template="company-preferences",HackerCompanyPreferencesCollectionView.prototype.initialize=function(options){return this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"change",this.render)},HackerCompanyPreferencesCollectionView.prototype.events={"click input[type='checkbox']":"checkBoxValChanged"},HackerCompanyPreferencesCollectionView.prototype.checkBoxValChanged=function(e){var changedModel;return changedModel=this.collection.models[parseInt($(e.currentTarget).data("index"))],$(e.currentTarget).prop("checked")===!0?changedModel.set("opt_in",!0):changedModel.set("opt_in",!1),changedModel.save()},HackerCompanyPreferencesCollectionView.prototype.render=function(){return this.has_template?this.renderCurrentView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderCurrentView()},this),this},HackerCompanyPreferencesCollectionView.prototype.renderCurrentView=function(){var ele,i,index,len,ref,that;if(that=this,this._template&&this.collection.sync_status)for($(this.el).html(this._template({companies:this.collection.toJSON()})),ref=this.$("input[type='checkbox']"),index=i=0,len=ref.length;len>i;index=++i)ele=ref[index],this.collection.models[index].get("opt_in")?($(ele).prop("checked",!0),$(ele).parent().parent().addClass("is-checked")):($(ele).prop("checked",!1),$(ele).parent().parent().removeClass("is-checked"));return this},HackerCompanyPreferencesCollectionView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.HackerCompanyPreferencesCollectionView=HackerCompanyPreferencesCollectionView})}).call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerProfileView,ref;return HackerProfileView=function(superClass){function HackerProfileView(){return HackerProfileView.__super__.constructor.apply(this,arguments)}return extend(HackerProfileView,superClass),HackerProfileView.prototype.schemaPageType="ProfilePage",HackerProfileView.prototype.template="new-hacker-profile",HackerProfileView.prototype.className="hacker-profile-view",HackerProfileView.prototype.initialize=function(options){return this.hacker=options.hacker,this.currentHacker=HR.profile(),this.enable_badges=options.enable_badges,this.elo_version=options.elo_version,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},HackerProfileView.prototype.setHackerProfile=function(model){return this.model&&delete this.model,this.model=model},HackerProfileView.prototype.events={"click a.view-more":"show_more","click a.send-message":"send_message","click .user_info li":"scroll_to","click .js-hacker-follow":"toggleFollowHacker"},HackerProfileView.prototype.scroll_to=function(e){return $("html,body").animate({scrollTop:$($(e.target).attr("data-target")).offset().top},"slow"),$(".user_info").find(".current").removeClass("current"),$(e.target).addClass("current")},HackerProfileView.prototype.show_more=function(e){return e.preventDefault(),"post"===$(e.target).attr("id")?this.posts.add_more():"event"===$(e.target).attr("id")?this.events_view.add_more():void 0},HackerProfileView.prototype.send_message=function(e){var model,show_dialog;return model=this.model,show_dialog=function(){var dialog;return dialog=new HR.util.ShowMessageDialog({username:model.get("username")}),dialog.render()},$.ajax({url:"/rest/threads/find?sender_id="+HR.profile().id+"&receiver_id="+this.model.get("id"),success:function(resp){return resp.status?Backbone.history.navigate("/inbox/thread/"+resp.thread_id,!0):show_dialog()},error:function(){return show_dialog()}})},HackerProfileView.prototype.render=function(){var name,username;return this.model.sync_status&&(name=this.model.get("name"),username=this.model.get("username"),name&&""!==name?HR.appController.setTitle(name+" - "+username):HR.appController.setTitle(username)),this.has_template?(this.renderCurrentView(),this.renderSubViews(),this.renderGraphView(),this.renderSubmissionGraphView()):($(this.el).html(HR.appController.viewLoader(64)),HR.appController.getTemplate(this.template,function(template){var elo_version,enable_badges;return this.has_template=!0,enable_badges=this.enable_badges,elo_version=this.elo_version,this._template=template,this.renderCurrentView(),this.renderSubViews(),this.renderGraphView(),this.renderSubmissionGraphView()},this)),this},HackerProfileView.prototype.renderSubViews=function(){return this.contestParticipationCollection||(this.contestParticipationCollection=HR.collection("hacker-contestparticipation"),this.contestParticipationCollection.setHackerUsername(this.model.get("username")),this.contestParticipationCollection.cached()),this.recentChallengesCollection||(this.recentChallengesCollection=HR.collection("hacker-recent-challenges"),this.recentChallengesCollection.setHackerUsername(this.model.get("username")),this.recentChallengesCollection.cached()),this.recentDiscussionsCollection||(this.recentDiscussionsCollection=HR.collection("hacker-recent-discussions"),this.recentDiscussionsCollection.setHackerUsername(this.model.get("username")),this.recentDiscussionsCollection.cached()),this.enable_badges&&(this.badges_collection||(this.badges_collection=HR.collection("hacker-badges"),this.badges_collection.setHacker(this.hacker),this.badges_collection.cached())),this.participationView||(this.participationView=new HR.HackerContestparticipationView({collection:this.contestParticipationCollection,enable_badges:this.enable_badges,self:this.model.get("self"),username:this.model.get("username")}),this.add_subview(this.participationView)),this.participationView.setElement($(this.el).find(".profile-contests-view")),this.participationView.self=this.model.get("self"),this.participationView.render(),this.recentChallengesView||(this.recentChallengesView=new HR.HackerRecentChallengesView({collection:this.recentChallengesCollection,self:this.model.get("self"),username:this.model.get("username")}),this.add_subview(this.recentChallengesView)),this.recentChallengesView.setElement($(this.el).find(".profile-challenges-view")),this.recentChallengesView.self=this.model.get("self"),this.recentChallengesView.render(),this.recentDiscussionsView||(this.recentDiscussionsView=new HR.HackerRecentDiscussionsView({collection:this.recentDiscussionsCollection,self:this.model.get("self"),username:this.model.get("username")}),this.add_subview(this.recentDiscussionsView)),this.recentDiscussionsView.setElement($(this.el).find(".profile-discussions-view")),this.recentDiscussionsView.self=this.model.get("self"),this.recentDiscussionsView.render(),this.enable_badges?(this.badges_view||(this.badges_view=new HR.HackerBadgesView({collection:this.badges_collection,hacker:this.hacker}),this.add_subview(this.badges_view)),this.badges_view.setElement($(this.el).find(".profile-badges-view")),this.badges_view.render()):void 0},HackerProfileView.prototype.renderCurrentView=function(){var rating_sync;return this.model.get("scores")&&(this.medals={gold:0,silver:0,bronze:0},_.each(_.values(this.model.get("scores")),function(_this){return function(obj){return obj&&obj.contest&&obj.contest.medals?(_this.medals.gold+=obj.contest.medals.gold,_this.medals.silver+=obj.contest.medals.silver,_this.medals.bronze+=obj.contest.medals.bronze):void 0}}(this))),this._template&&this.model&&this.model.sync_status?(rating_sync=!1,this.ratingView&&(rating_sync=this.ratingView.current_sync_status),$(this.el).html(this._template({model:this.model.toJSON(),rating_sync:rating_sync,enable_badges:this.enable_badges,medals:this.medals}))):void 0},HackerProfileView.prototype.renderGraphView=function(){return this.ratingView||this.ratingView||(this.ratingView=new HR.RatingHistoryView({model:this.model,elo_version:this.elo_version})),this.ratingView.setElement($(this.el).find("#profile-graph-view")),this.ratingView.render()},HackerProfileView.prototype.renderSubmissionGraphView=function(){return this.submissionHistoryView||this.submissionHistoryView||(this.submissionHistoryView=new HR.SubmissionHistoryView({model:this.model})),this.assign("#cal-heatmap",this.submissionHistoryView)},HackerProfileView.prototype.toggleFollowHacker=function(e){var $element,_error_callback,_success_callback,that;return this.currentHacker.isLoggedIn()?(e.preventDefault(),e.stopPropagation(),$element=$(e.currentTarget),$element.attr("disabled")?void 0:($element.attr("disabled",!0),that=this,_success_callback=function(resp){return that.$(".js-follow-count").html(resp.total),that.$(".js-hacker-follow").removeAttr("disabled"),resp.following?(that.$(".js-hacker-follow").html("Unfollow"),hr_metrics.track("Click","hrFollowButton",{attribute1:"profile",attribute2:"Follow"})):(that.$(".js-hacker-follow").html("Follow"),hr_metrics.track("Click","hrFollowButton",{attribute1:"profile",attribute2:"Unfollow"}))},_error_callback=function(resp){return that.$(".js-hacker-follow").removeAttr("disabled"),alert("Please try again.")},this.currentHacker.toggleFollow("Hacker",this.model.get("id"),_success_callback,_error_callback))):(this.ShowLoginDialog(),!1)},HackerProfileView.prototype.ShowLoginDialog=function(){var dialog;return dialog=HR.util.ShowLoginDialog({error_message:"Please sign up or log in to follow "+this.model.get("username")}),dialog.render()},HackerProfileView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.HackerProfileView=HackerProfileView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerContestparticipationView,ref;return HackerContestparticipationView=function(superClass){function HackerContestparticipationView(){return HackerContestparticipationView.__super__.constructor.apply(this,arguments)}return extend(HackerContestparticipationView,superClass),HackerContestparticipationView.prototype.template="hacker-contest",HackerContestparticipationView.prototype.initialize=function(options){return this.collection=options.collection,this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"reset",this.render),this.enable_badges=options.enable_badges,this.self=options.self,this.username=options.username},HackerContestparticipationView.prototype.events={"click div.more-contest-list":"getMore"},HackerContestparticipationView.prototype.getMore=function(){var that;return this.collection.incrOffset()?(that=this,this.collection.cached({remove:!1})):void 0},HackerContestparticipationView.prototype.canGetMore=function(){return this.collection.length<this.collection.total},HackerContestparticipationView.prototype.render=function(){return this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this},HackerContestparticipationView.prototype.renderView=function(){return this._template&&this.collection.sync_status?$(this.el).html(this._template({model:this.collection.toJSON(),canGetMore:this.canGetMore(),enable_badges:this.enable_badges,self:this.self,username:this.username})):void 0},HackerContestparticipationView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.HackerContestparticipationView=HackerContestparticipationView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerRecentChallengesView,ref;return HackerRecentChallengesView=function(superClass){function HackerRecentChallengesView(){return HackerRecentChallengesView.__super__.constructor.apply(this,arguments)}return extend(HackerRecentChallengesView,superClass),HackerRecentChallengesView.prototype.template="hacker-challenges",HackerRecentChallengesView.prototype.initialize=function(options){return this.collection=options.collection,this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"reset",this.render),this.self=options.self,this.username=options.username},HackerRecentChallengesView.prototype.events={"click div.more-challenges-list":"getMore"},HackerRecentChallengesView.prototype.getMore=function(){var that;return this.collection.incrOffset()?(that=this,this.collection.cached({remove:!1,success:function(collection,response){var ref;return 0===(null!=(ref=response.models)?ref.length:void 0)?that.canGetMore=!1:void 0}})):void 0},HackerRecentChallengesView.prototype.render=function(){return this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this},HackerRecentChallengesView.prototype.renderView=function(){return this._template&&this.collection.sync_status?($(this.el).html(this._template({model:this.collection.toJSON(),canGetMore:this.canGetMore||this.collection.canGetMore(),self:this.self,username:this.username})),$(this.el).find(".time-ago").timeago()):void 0},HackerRecentChallengesView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.HackerRecentChallengesView=HackerRecentChallengesView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerRecentDiscussionsView,ref;return HackerRecentDiscussionsView=function(superClass){function HackerRecentDiscussionsView(){return HackerRecentDiscussionsView.__super__.constructor.apply(this,arguments)}return extend(HackerRecentDiscussionsView,superClass),HackerRecentDiscussionsView.prototype.template="hacker-discussions",HackerRecentDiscussionsView.prototype.initialize=function(options){return this.collection=options.collection,this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"reset",this.render),this.canGetMore=!0,this.self=options.self,this.username=options.username},HackerRecentDiscussionsView.prototype.events={"click div.more-discussions-list":"getMore"},HackerRecentDiscussionsView.prototype.getMore=function(){var that;return this.collection.incrOffset()?(that=this,this.collection.cached({remove:!1,success:function(collection,response){var ref;return 0===(null!=(ref=response.models)?ref.length:void 0)?that.canGetMore=!1:void 0}})):void 0},HackerRecentDiscussionsView.prototype.render=function(){return this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this},HackerRecentDiscussionsView.prototype.renderView=function(){return this._template&&this.collection.sync_status?(this.canGetMore=this.collection.models.length<this.collection.limit?!1:!0,$(this.el).html(this._template({model:this.collection.toJSON(),canGetMore:this.caniGetMore,self:this.self,username:this.username})),$(this.el).find(".time-ago").timeago()):void 0},HackerRecentDiscussionsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.HackerRecentDiscussionsView=HackerRecentDiscussionsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,StackoverflowView,ref;return StackoverflowView=function(superClass){function StackoverflowView(){return StackoverflowView.__super__.constructor.apply(this,arguments)}return extend(StackoverflowView,superClass),StackoverflowView.prototype.template="stackoverflow-data",StackoverflowView.prototype.initialize=function(options){return this.model=options.model,this.self=options.self,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.render)},StackoverflowView.prototype.events={"click .refresh-button":"refreshData"},StackoverflowView.prototype.refreshData=function(){var that;return $.ajax({url:"rest/hackers/"+this.model.username+"/fetch_stackoverflow_data"}),this.model.set("fetch_status",0),that=this,setTimeout(function(){return that.model.pollForData()},2e3)},StackoverflowView.prototype.render=function(){return this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this},StackoverflowView.prototype.renderView=function(){return this._template&&this.model.sync_status?$(this.el).html(this._template({model:this.model.toJSON(),self:this.self})):void 0},StackoverflowView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.StackoverflowView=StackoverflowView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerBadgesView,ref;return HackerBadgesView=function(superClass){function HackerBadgesView(){return HackerBadgesView.__super__.constructor.apply(this,arguments)}return extend(HackerBadgesView,superClass),HackerBadgesView.prototype.template="hacker-badges",HackerBadgesView.prototype.initialize=function(options){return this.hacker=options.hacker,this.collection=options.collection,this.listenTo(this.collection,"change",this.render),this.listenTo(this.collection,"reset",this.render)},HackerBadgesView.prototype.render=function(){return this.has_template?this.renderView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderView()},this),this},HackerBadgesView.prototype.renderView=function(){return this._template&&this.collection.sync_status?($(this.el).html(this._template({model:this.collection.toJSON(),hacker:this.hacker,self_profile:this.hacker===HR.profile().get("username"),service_status:this.collection.service_status})),HR.util.ajaxmsg("Loading...",!0,!0,.5)):void 0},HackerBadgesView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.HackerBadgesView=HackerBadgesView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,MyNetworkView;return MyNetworkView=function(superClass){function MyNetworkView(){return MyNetworkView.__super__.constructor.apply(this,arguments)}return extend(MyNetworkView,superClass),MyNetworkView.prototype.template="mynetwork",MyNetworkView.prototype.initialize=function(options){return this.page=this.collection.page,this.tab=this.collection.tab,this.follow_subview=[]},MyNetworkView.prototype.render=function(){var i,len,model,ref,subview;for($(this.el).html(HR.appController.template(this.template,this)({current_tab:this.tab,total:this.collection.total})),this.follow_subview[this.tab]||(this.follow_subview[this.tab]={}),ref=this.collection.models,i=0,len=ref.length;len>i;i++)model=ref[i],this.follow_subview[this.tab][model.get("id")]||(subview=new HR.FollowUserSnippetView({model:model}),this.add_subview(subview),this.follow_subview[this.tab][model.get("id")]=subview),this.$(".list-container").append(this.follow_subview[this.tab][model.get("id")].render().el);return HR.util.pagination(this.$(".pagination-container"),this.collection.total,"/network/"+this.tab+"/",this.page,this.collection,20,10,"backbone",!1),this},MyNetworkView}(window.HR.GenericView),HR=window.HR||{},HR.MyNetworkView=MyNetworkView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,RatingHistoryView,ref;return RatingHistoryView=function(superClass){function RatingHistoryView(){return RatingHistoryView.__super__.constructor.apply(this,arguments)}return extend(RatingHistoryView,superClass),RatingHistoryView.prototype.template="dashboard/rating-history",RatingHistoryView.prototype.className="dashboard-rating-history",RatingHistoryView.prototype.initialize=function(options){var slug,that;return null==options&&(options={}),this.rendered=!1,this.current_sync_status=!1,this.elo_version=options.elo_version,that=this,this.model.fetchScores(),this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),slug=this.elo_version?"rating_histories_elo":"rating_histories_bayesian",$.ajax({url:"rest/hackers/"+this.model.get("username")+"/"+slug,success:function(data,resp){return that.data=data,that.current_sync_status=!0,that.model.trigger("reset")}})},RatingHistoryView.prototype.events={"change #track-selector":"changeChart","click .overall-chart":"changeChartOverall","click .last-year-chart":"changeChartLastYear"},RatingHistoryView.prototype.changeChartOverall=function(){var value;return value=parseInt($("#track-selector").val()),this.$(".last-year-chart").removeClass("is_active"),this.$(".overall-chart").addClass("is_active"),this.renderChart(value),this.renderScore(this.data.models[value-1].category),hr_metrics.track("Click","ProfileChangeRatingSpan",{attribute1:this.model.get("username"),attribute2:this.data.models[value-1].category,attribute3:"Overall",attribute11:this.model.get("self")})},RatingHistoryView.prototype.changeChartLastYear=function(){var lastYear,now,value;return this.$(".last-year-chart").addClass("is_active"),this.$(".overall-chart").removeClass("is_active"),value=parseInt($("#track-selector").val()),lastYear=new Date,now=new Date,lastYear.setYear(now.getFullYear()-1),this.renderChart(value),this.renderScore(this.data.models[value-1].category),hr_metrics.track("Click","ProfileChangeRatingSpan",{attribute1:this.model.get("username"),attribute2:this.data.models[value-1].category,attribute3:"LastYear",attribute11:this.model.get("self")})},RatingHistoryView.prototype.changeChart=function(){var value;return value=parseInt($("#track-selector").val()),this.renderChart(value),this.renderScore(this.tracks[value-1].text),hr_metrics.track("Click","ProfileChangeRatingChart",{attribute1:this.model.get("username"),attribute2:this.tracks[value-1].slug,attribute11:this.model.get("self")})},RatingHistoryView.prototype.renderChart=function(track_id,startDate,endDate,options){var acceptedEvents,defaultOptions,event,history,i,len,prev,ref,that;if(null==startDate&&(startDate=null),null==endDate&&(endDate=null),null==options&&(options={}),history=this.findCategoryModelForChart(track_id),-1===history)return this.$("#rating-graph-tab-container").hide(),void this.$("#rating-graph-tab-hidden").show();for(prev=1200,ref=history.events,i=0,len=ref.length;len>i;i++)event=ref[i],event.rating=Math.floor(event.rating),event.change=event.rating-prev,prev=event.rating;return that=this,acceptedEvents=history.events.filter(function(event){var eventDate;return eventDate=new Date(event.date),startDate&&startDate>eventDate?!1:endDate&&eventDate>endDate?!1:!0}),defaultOptions={chart:{zoomType:"x",backgroundColor:null,height:420,spacingBottom:20,marginLeft:25},plotOptions:{line:{color:"#C2C7D0",lineWidth:2}},title:{text:null},legend:{enabled:!1},xAxis:{title:{text:null},labels:{enabled:!1},tickPosition:"inside"},yAxis:{title:{text:"Score",margin:15,style:{color:"#c2c7d0"}},tickInterval:600,labels:{format:"{value}",x:40,y:20,style:{color:"#c2c7d0",fontWeight:"bold",fontSize:"0.2em"}},gridLineWidth:1,lineWidth:1},credits:{enabled:!1},series:[{data:acceptedEvents.map(function(event){return{x:new Date(event.date).getTime(),y:event.rating,event:event}}),type:"line",name:"Rank",marker:{radius:4,fillColor:"rgba(0,0,0,0)",lineColor:"#39424e",lineWidth:2,enabled:!0,states:{hover:{radius:4,fillColor:"#39424e",lineColor:"#39424e",lineWidth:2,enabled:!0}}}}],tooltip:{backgroundColor:"rgba(0,0,0,0.85)",borderRadius:"15",useHTML:!0,style:{color:"#eee",fontSize:"15px",fontWeight:"700"},formatter:function(){var colors,date,date_string,html,level_in_words;return event=this.point.event,date=new Date(event.date),level_in_words=["O(1)","O(1)","O(log N)","O(N)","O(N^2)","O(2^N)"],colors=["#2bc56d","#2bc56d","#32a1de","#f65039","#805ec9","#c2c7d0"],date_string=function(date){var curr_date,curr_month,curr_year,d,m_names;return d=new Date(date),m_names=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),curr_date=d.getDate(),curr_month=m_names[d.getMonth()],curr_year=d.getFullYear(),curr_date+" "+curr_month+" "+curr_year},html=event.level?event.contest_name+'<br/>Rating: <span style="color:'+colors[event.level]+'">'+level_in_words[event.level]+"</span><br/>Score: "+event.rating+"<br/>"+date_string(event.date):event.contest_name+"<br/>Score: "+event.rating+"<br/>"+date_string(event.date)}}},options=_.extend(defaultOptions,options),that=this,HR.requires(["compound/highcharts"],function(_this){return function(){return _this.$("#rating-graph-tab-hidden").hide(),_this.$("#rating-graph-tab-container").show(),_this.$("#rating-graph-tab").highcharts(options)}}(this))},RatingHistoryView.prototype.findCategoryModelForChart=function(track_id){var data,i,len,ref,track_slug;if(null!=this.tracks)for(track_slug=this.tracks[track_id-1].text.toLowerCase(),ref=this.data.models,i=0,len=ref.length;len>i;i++)if(data=ref[i],data.category.toLowerCase()===track_slug)return data;return-1},RatingHistoryView.prototype.renderScore=function(track_val){var score;return _.isObject(this.model.get("scores"))&&_.isObject(this.model.get("scores")[track_val])?(score=this.model.get("scores")[track_val],null!=score.contest.score?this.$("#hacker-contest-score").html(parseInt(score.contest.score)):this.$("#hacker-contest-score").html("N/A"),null!=score.contest.rank?this.$("#hacker-contest-rank").html(score.contest.rank):this.$("#hacker-contest-rank").html("N/A"),null!=score.contest.percentile?this.$("#hacker-percentile").html(score.contest.percentile):this.$("#hacker-percentile").html("N/A"),null!=score.contest.competitions?this.$("#hacker-competitions").html(score.contest.competitions):this.$("#hacker-competitions").html("N/A"),null!=score.practice.score?this.$("#hacker-archive-score").html(parseInt(score.practice.score)):this.$("#hacker-archive-score").html("N/A"),null!=score.practice.rank?this.$("#hacker-practice-rank").html(score.practice.rank):this.$("#hacker-practice-rank").html("N/A"),null!=score.contest.level?(this.$("#hacker-title").html(HR.util.ratingLevelToTitle(score.contest.level)),this.$("#hacker-title").removeClass("rg_1 rg_2 rg_3 rg_4 rg_5"),this.$("#hacker-title").addClass("rg_"+score.contest.level)):this.$("#hacker-title").html("N/A")):(this.$("#hacker-rating").html("N/A"),this.$("#hacker-rank").html("N/A"),this.$("#hacker-title").html("N/A"))},RatingHistoryView.prototype.render=function(){var category,index,scores_obj,val;if(this.data&&this.model.sync_status&&!_.isEmpty(this.model.get("scores"))){this.tracks=[],index=0,scores_obj=this.model.get("scores"),null!=scores_obj&&null!=scores_obj.Algorithms&&this.tracks.push({id:++index,text:scores_obj.Algorithms.name,slug:scores_obj.Algorithms.slug});for(category in scores_obj)val=scores_obj[category],"general"!==val.slug&&"Algorithms"!==category&&this.tracks.push({id:++index,text:category,slug:val.slug});$(this.el).html(HR.appController.template(this.template,this)({tracks:this.tracks,username:this.model.get("username"),data:this.data})),this.$(".overall-chart").addClass("is_active"),this.data.models.length>0?(this.$("#rating-graph-tab-hidden").hide(),this.$("#rating-graph-tab-container").show(),this.renderChart(this.tracks[0].id)):(this.$("#rating-graph-tab-hidden").show(),this.$("#rating-graph-tab-container").hide()),this.renderScore(this.tracks[0].text)}return this},RatingHistoryView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.RatingHistoryView=RatingHistoryView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SubmissionHistoryView,ref;return SubmissionHistoryView=function(superClass){function SubmissionHistoryView(){return SubmissionHistoryView.__super__.constructor.apply(this,arguments)}return extend(SubmissionHistoryView,superClass),SubmissionHistoryView.prototype.initialize=function(options){var that;return null==options&&(options={}),that=this,HR.requires(["compound/profile-heatmap-libs"],function(_this){return function(){return _this.js_dependencies_loaded=!0,_this.render()}}(this)),$.ajax({url:"rest/hackers/"+this.model.get("username")+"/submission_histories",success:function(data,resp){return that.data=data,that.render()}})},SubmissionHistoryView.prototype.formatedData=function(){var count,date,formatted_data,ref,timeStamp;formatted_data={},this.minTimestamp=0,this.maxTimestamp=0,ref=this.data;for(date in ref)count=ref[date],timeStamp=parseInt(Date.parse(date.replace(/-/g,"/"))/1e3),(0===this.minTimestamp||timeStamp<this.minTimestamp)&&(this.minTimestamp=timeStamp),(0===this.maxTimestamp||timeStamp>this.maxTimestamp)&&(this.maxTimestamp=timeStamp),formatted_data[""+timeStamp]=parseInt(count);return formatted_data},SubmissionHistoryView.prototype.render=function(){var data,maxDate,startDate,testDate;return this.js_dependencies_loaded?(null!=document.getElementById("cal-heatmap")&&(data=this.formatedData(),startDate=new Date(1e3*this.minTimestamp),maxDate=new Date(1e3*this.maxTimestamp),testDate=new Date(1e3*this.maxTimestamp),testDate.setMonth(testDate.getMonth()-11),startDate=testDate>startDate?testDate:startDate,null!=this.cal&&(this.cal=this.cal.destroy()),this.cal=new CalHeatMap,this.cal.init({itemSelector:"#cal-heatmap",domain:"month",subDomain:"day",start:startDate,maxDate:maxDate,data:data})),this):this},SubmissionHistoryView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SubmissionHistoryView=SubmissionHistoryView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowAddEntityOptionView,HR;return FollowAddEntityOptionView=function(superClass){function FollowAddEntityOptionView(){return FollowAddEntityOptionView.__super__.constructor.apply(this,arguments)}return extend(FollowAddEntityOptionView,superClass),FollowAddEntityOptionView.prototype.template="follow/addentity",FollowAddEntityOptionView.prototype.className="fill-light add-option-container pdT pdL pdR",FollowAddEntityOptionView.prototype.attributes={draggable:"true"},FollowAddEntityOptionView.prototype.initialize=function(options){return this.parent=options.parent?options.parent:!1,this.follow_entity_view=options.follow_entity_view,this.settings_page=options.settings_page?!0:!1,this.page=options.page?options.page:"",this.entity_view=options.entity_view,
this.follow_suggestion_model="",this.follow_view=""},FollowAddEntityOptionView.prototype.events=function(){return{"click .remove-entity":"deleteEntity",optionAdded:"optionAdded","mouseover .entity-name":"showTooltip","mouseleave .entity-name":"fadeOutTooltip","click .entity-name":"hideTooltip"}},FollowAddEntityOptionView.prototype.render=function(){var entity_data,i,len,ref;if($(this.el).html(HR.appController.template(this.template,this)({model:this.model,settings_page:this.settings_page})),this.model.options.length)for(ref=this.model.options,i=0,len=ref.length;len>i;i++)entity_data=ref[i],this.addOptionsForm(entity_data);else this.addOptionsForm();return this},FollowAddEntityOptionView.prototype.addOptionsForm=function(entity_data){var form_view;return null==entity_data&&(entity_data=!1),form_view=new HR.FollowAddFormView({model:this.model,parent:this,entity_data:entity_data,follow_entity_view:this.follow_entity_view,page:this.page}),this.add_subview(form_view),this.$(".fields-container").append(form_view.render().el),this},FollowAddEntityOptionView.prototype.deleteEntity=function(e){return e.preventDefault(),this.model.destroy(),this.follow_entity_view.saveIt(),this.destroy()},FollowAddEntityOptionView.prototype.showTooltip=function(e){return 0!==this.model.list_index?this.$(e.currentTarget).tooltip("show"):void 0},FollowAddEntityOptionView.prototype.fadeOutTooltip=function(){return this.$(".tooltip").fadeOut()},FollowAddEntityOptionView.prototype.hideTooltip=function(){return this.$(".tooltip").hide()},FollowAddEntityOptionView}(window.HR.GenericView),HR=window.HR||{},HR.FollowAddEntityOptionView=FollowAddEntityOptionView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowAddFormView,HR;return FollowAddFormView=function(superClass){function FollowAddFormView(){return FollowAddFormView.__super__.constructor.apply(this,arguments)}return extend(FollowAddFormView,superClass),FollowAddFormView.prototype.template="follow/addform",FollowAddFormView.prototype.initialize=function(options){return this.parent=options.parent,this.follow_entity_view=options.follow_entity_view,this.entity_data=options.entity_data?options.entity_data:!1,this.option_index=0,this.page=options.page?options.page:""},FollowAddFormView.prototype.events=function(){return{"change input[name='to']":"validateTo","change input[name='from']":"validateFrom","change input[name='program']":"validateForm","change input[name='degree']":"validateForm","change input[name='jobtitle']":"validateForm"}},FollowAddFormView.prototype.validateTo=function(e){var from,to;return from=this.from_year.val(),to=this.to_year.val(),from&&from>to?(alert("Please select a valid year"),this.to_year.select2("val","")):(this.addToTempStore(e),"settings"===this.page&&(this.parent.parent.updates=!0),this.addEntityOption())},FollowAddFormView.prototype.validateFrom=function(e){var from,to;return from=this.from_year.val(),to=this.to_year.val(),to&&from>to?this.to_year.select2("val",""):(this.addToTempStore(e),"settings"===this.page&&(this.parent.parent.updates=!0),this.addEntityOption())},FollowAddFormView.prototype.validateForm=function(e){var val;return val=$(e.target).val(),val?(this.addToTempStore(e),"settings"===this.page&&(this.parent.parent.updates=!0),this.addEntityOption()):void 0},FollowAddFormView.prototype.addToTempStore=function(e){var input;return input=$(e.target),this.model.addToTempStore(input.attr("name"),input.val())},FollowAddFormView.prototype.addEntityOption=function(){var that;return this.$(".add-entity-ok").addClass("hide"),this.$(".input-v2-loader-image").removeClass("hide"),this.model.clearTempStore(),"school"===this.model.get("type")?this.option_index=this.model.addDetails({program:this.program.val(),degree:this.degree.val(),from_year:this.from_year.val(),to_year:this.to_year.val()}):this.option_index=this.model.addDetails({job_title:this.jobtitle.val(),from_year:this.from_year.val(),to_year:this.to_year.val()}),that=this,this.follow_entity_view.saveIt({callback:function(){return that.$(".input-v2-loader-image").addClass("hide"),that.$(".add-entity-ok").removeClass("hide"),this.timer&&window.clearTimeout(this.timer),this.timer=setTimeout(function(){return that.$(".add-entity-ok").addClass("hide")},1500),that.model.clearTempStore(),"settings"===that.page?that.parent.parent.updates=!1:void 0}},hr_metrics.track("Click","hfAddEntityOption",{attribute1:this.page,attribute2:this.model.get("type")}))},FollowAddFormView.prototype.render=function(){return this.entity_data&&(this.entity_data.program||this.entity_data.job_title)?this.data_present=!0:this.data_present=!1,$(this.el).html(HR.appController.template(this.template,this)({model:this.model,programs:this.model._program_options,degrees:this.model._degree_options,from_range:this.model._from_range,to_range:this.model._to_range,entity_data:this.entity_data,data_present:this.data_present})),this.program=this.$("input[name='program']"),this.degree=this.$("input[name='degree']"),this.jobtitle=this.$("input[name='jobtitle']"),this.from_year=this.$("input[name='from']"),this.to_year=this.$("input[name='to']"),"school"===this.model.get("type")&&(this.program.select2(this.select2_options(this.model._program_options)),this.degree.select2(this.select2_options(this.model._degree_options))),this.from_year.select2(this.select2_options(this.model._from_range,!0)),this.to_year.select2(this.select2_options(this.model._to_range,!0)),this.data_present&&(this.program.select2("val",this.entity_data.program),this.degree.select2("val",this.entity_data.degree),this.jobtitle.val(this.entity_data.job_title),this.from_year.select2("val",this.entity_data.from_year),this.to_year.select2("val",this.entity_data.to_year)),this},FollowAddFormView.prototype.select2_options=function(data,disable_custom){var _data,func;return null==disable_custom&&(disable_custom=!1),_data=[],_.each(data,function(d){return _data.push({id:d.toString(),text:d.toString()})}),func=function(term,data){var _obj,_term;return _term=term.charAt(0).toUpperCase()+term.substring(1),_obj={id:term,text:_term}},disable_custom?{data:_data}:{data:_data,createSearchChoice:func}},FollowAddFormView}(window.HR.GenericView),HR=window.HR||{},HR.FollowAddFormView=FollowAddFormView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowBannerView,HR;return FollowBannerView=function(superClass){function FollowBannerView(){return FollowBannerView.__super__.constructor.apply(this,arguments)}return extend(FollowBannerView,superClass),FollowBannerView.prototype.template="follow/banner",FollowBannerView.prototype.events=function(){return{"click .close-banner":"closeBanner","click a":"closeBanner"}},FollowBannerView.prototype.closeBanner=function(e){return $.cookie("hidefollowbanner",1),this.destroy()},FollowBannerView.prototype.render=function(){return this.model.get("show_banner")&&$(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),this},FollowBannerView}(window.HR.GenericView),HR=window.HR||{},HR.FollowBannerView=FollowBannerView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowEntityCollectionView,HR;return FollowEntityCollectionView=function(superClass){function FollowEntityCollectionView(){return FollowEntityCollectionView.__super__.constructor.apply(this,arguments)}return extend(FollowEntityCollectionView,superClass),FollowEntityCollectionView.prototype.template="follow/default",FollowEntityCollectionView.prototype.initialize=function(options){return this.subviews=[],this.entity_model_count=0,this.onboarding=options.onboarding},FollowEntityCollectionView.prototype.events=function(){return{"click .find-friends":function(e){return e.preventDefault(),_.each(this.subviews,function(subview,index){return subview.saveIt()}),!0}}},FollowEntityCollectionView.prototype.toggleFindFriends=function(){var func,that;return that=this,func=function(){return that.$(".add-option-container").length>0?that.$(".find-friends").removeClass("hidden"):that.$(".find-friends").addClass("hidden")},setTimeout(func,10),this},FollowEntityCollectionView.prototype.render=function(){var i,index,len,model,ref;for($(this.el).html(HR.appController.template(this.template,this)({collection:this.collection,onboarding:this.onboarding})),index=0,ref=this.collection.models,i=0,len=ref.length;len>i;i++)model=ref[i],this.subviews[index]||(this.subviews[index]=new HR.FollowEntityView({model:model,parent:this}),this.add_subview(this.subviews[index])),this.$(".group-container").append(this.subviews[index].render().el),index+=1;return this},FollowEntityCollectionView}(window.HR.GenericView),HR=window.HR||{},HR.FollowEntityCollectionView=FollowEntityCollectionView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowEntityView,HR;return FollowEntityView=function(superClass){function FollowEntityView(){return FollowEntityView.__super__.constructor.apply(this,arguments)}return extend(FollowEntityView,superClass),FollowEntityView.prototype.template="follow/entity",FollowEntityView.prototype.initialize=function(options){return this.request=!1,this.parent=options.parent?options.parent:!1,this.collection=new HR.FollowEntityCollection,this.collection.setEntity(this.model.get("entity")),this.listenTo(this.collection,"reset",this.render),this.collection.fetch({reset:!0}),this.profile=HR.profile(),this.settings_page=options.settings_page?!0:!1,this.page=this.settings_page?"settings":"onboarding",this.subviews={},this.fetched=!1,this},FollowEntityView.prototype.events=function(){return{"change input[name='entity-name']":"addEntity","dragstart div.add-option-container":"entityObjDragStart","dragend div.add-option-container":"entityObjDragEnd","dragover div.add-option-container":"entityObjDragOver","dragleave div.add-option-container":"entityObjDragLeave","drop div.add-option-container":"entityObjDrop"}},FollowEntityView.prototype.showFollowSuggestions=function(){return this.follow_suggestions_collection_view&&this.follow_suggestions_collection_view.destroy(),this.follow_suggestion_collection||(this.follow_suggestion_collection=new HR.FollowSuggestionsCollection),this.follow_suggestions_collection_view=new HR.FollowSuggestionsCollectionView({collection:this.follow_suggestion_collection,settings_page:this.settings_page,type:this.model.get("entity")}),this.add_subview(this.follow_suggestions_collection_view),this.$(".follow-list-container").html(this.follow_suggestions_collection_view.render().el),hr_metrics.track("Load","hfLoadFollowSuggestions",{attribute1:this.page}),this},FollowEntityView.prototype.addEntity=function(e){var entity_name,entity_type,input,isDefault;return input=this.$('input[name="entity-name"]').select2("data"),entity_name=input.id,isDefault=!!input["default"],entity_type=this.model.get("entity"),entity_name?(hr_metrics.track("Click","hfAddEntity",{attribute1:this.page,attribute2:entity_type}),isDefault?HR.util.changeSelect2SchoolDialog(entity_type,entity_name,function(_this){return function(data){return _this.addEntityObject({name:data.entity_name,url:data.url})}}(this)):this.addEntityObject({name:entity_name}),this):void 0},FollowEntityView.prototype.addEntityObject=function(entity_object){var entity_model;return entity_model=new HR.FollowEntityModel({name:entity_object.name,url:entity_object.url,type:this.model.get("entity")}),entity_model.setIndex(this.collection.length),this.updateRepresented(),this.collection.add(entity_model),this.saveIt(),this.renderNewEntity(entity_model),this.$(".add-option-container:last").focus()},FollowEntityView.prototype.renderNewEntity=function(entity_model){return this.subviews[entity_model.get("name")]&&this.subviews[entity_model.get("name")].destroy(),this.subviews[entity_model.get("name")]=new HR.FollowAddEntityOptionView({model:entity_model,parent:this.parent,entity_view:this,follow_entity_view:this,settings_page:this.settings_page,page:this.page}),this.add_subview(this.subviews[entity_model.get("name")]),this.$(".add-entity-detail-container").append(this.subviews[entity_model.get("name")].render().el),this.input.select2("val",""),this.input.select2("close"),this.fetched=!1,this},FollowEntityView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,settings_page:this.settings_page})),this.input=this.$('input[name="entity-name"]'),this.input.select2(HR.util.getSelect2Options(this.model.get("entity"))),_.each(this.collection.models,function(_this){return function(m){return m.set("type",_this.model.get("entity")),_this.renderNewEntity(m)}}(this)),this.updateIndexes(!1),this.delegateEvents(),this},FollowEntityView.prototype.saveIt=function(options){var entity,key;return null==options&&(options={}),entity=this.model.get("entity"),key="hacker_"+entity+"_additional",this.profile.set(key,this.getData(),{silent:!0}),this.profile.save(_.pick(this.profile.attributes,key),{silent:!0,patch:!0,success:function(){return options.callback?options.callback():void 0}})},FollowEntityView.prototype.getData=function(){var data;return data=[],_.each(this.collection.models,function(model){return data.push(model.getData())}),data},FollowEntityView.prototype.entityObjDragStart=function(e){return this.$(e.currentTarget).addClass("hover-opacity-pct50"),e.originalEvent.dataTransfer.effectAllowed="move",e.originalEvent.dataTransfer.setData("text/html","")},FollowEntityView.prototype.entityObjDragEnd=function(e){var $selected_elem,changed,destination_index,source_dom,source_index;return e.preventDefault(),this.$(e.currentTarget).removeClass("hover-opacity-pct50"),source_index=this.$(e.currentTarget).find(".entity-name").data("index"),$selected_elem=this.$(".add-option-container[selected=selected]"),destination_index=$selected_elem.find(".entity-name").data("index"),changed=!1,source_index!==destination_index&&1===$selected_elem.length&&(source_dom=this.$(e.currentTarget).detach(),$selected_elem.before(source_dom),changed=!0),$selected_elem.removeClass("hover-drop-border-top"),$selected_elem.removeAttr("selected"),this.updateIndexes(changed)},FollowEntityView.prototype.updateIndexes=function(changed){var that;return that=this,this.$(".add-option-container").each(function(index){var $entity_elem,cur_value,model;return $entity_elem=that.$(this).find(".entity-name"),cur_value=$entity_elem.data("index"),model=that.findModelByHTMLTemplate($entity_elem),cur_value!==index&&($entity_elem.data("index",index),null!=model&&model.list_index!==index&&model.setIndex(index),null!=changed)?changed=!0:void 0}),this.collection.sort(),changed?this.updateRepresented(!0):void 0},FollowEntityView.prototype.updateRepresented=function(save){var changed,that;return null==save&&(save=!1),that=this,changed=!1,_.each(this.collection.models,function(model){if(0===model.list_index){if(model.get("represented")!==!0)return model.set("represented",!0),changed=!0}else if(model.get("represented")===!0)return changed=!0,model.set("represented",!1)}),save&&changed?this.saveIt():void 0},FollowEntityView.prototype.entityObjDragOver=function(e){return e.preventDefault(),this.$(e.currentTarget).addClass("hover-drop-border-top"),this.$(e.currentTarget).attr("selected","selected"),!1},FollowEntityView.prototype.entityObjDragLeave=function(e){return this.$(e.currentTarget).removeClass("hover-drop-border-top"),this.$(e.currentTarget).removeAttr("selected")},FollowEntityView.prototype.entityObjDrop=function(e){return e.preventDefault()},FollowEntityView.prototype.findModelByHTMLTemplate=function($entity_elem){return 1===$entity_elem.length?_.find(this.collection.models,function(model){return model.cid===$entity_elem.data("model-cid")}):null},FollowEntityView}(window.HR.GenericView),HR=window.HR||{},HR.FollowEntityView=FollowEntityView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowSuggestionsCollectionView,HR;return FollowSuggestionsCollectionView=function(superClass){function FollowSuggestionsCollectionView(){return FollowSuggestionsCollectionView.__super__.constructor.apply(this,arguments)}return extend(FollowSuggestionsCollectionView,superClass),FollowSuggestionsCollectionView.prototype.template="follow/suggestions",FollowSuggestionsCollectionView.prototype.id="follow-list",FollowSuggestionsCollectionView.prototype.initialize=function(options){return this.collection.page=0,this.settings_page=options.settings_page?!0:!1,this.type=options.type,this.settings_page&&this.type&&this.collection.setSettingsPageTab(this.type+"_tab"),this.collection.fetch({reset:!0,success:function(_this){return function(collection,response){return _this.render()}}(this)}),this.page=options.page?options.page:"",this.busy=!1,$(window).on("scroll",_.bind(this.detectScroll,this))},FollowSuggestionsCollectionView.prototype.detectScroll=function(e){return $(window).scrollTop()>=$(document).height()-$(window).height()-200?this.renderMore():void 0},FollowSuggestionsCollectionView.prototype.renderMore=function(){var loader,that;if(!(this.collection.models.length>=this.collection.total||this.busy))return loader=$(HR.appController.viewLoader(32)),loader.css({"margin-top":"-120px","padding-bottom":"20px"}),$(this.el).append(loader),this.busy=!0,that=this,this.collection.page+=1,this.collection.fetch({remove:!1,silent:!0,success:function(collection,response){return that.render(collection.models),that.busy=!1}}),hr_metrics.track("Scroll","hfLoadMoreSuggestions",{attribute1:this.page,attribute2:this.collection.page}),this},FollowSuggestionsCollectionView.prototype.render=function(){return this.collection.sync_status?($(this.el).html(HR.appController.template(this.template,this)({collection:this.collection,settings_page:this.settings_page})),this.renderList(this.collection.models)):$(this.el).append(HR.appController.viewLoader(64)),this},FollowSuggestionsCollectionView.prototype.renderList=function(models){var i,len,model,model_view;for(this.cleanupSubviews(),i=0,len=models.length;len>i;i++)model=models[i],model_view=new HR.FollowSuggestionView({model:model,page:this.page}),this.add_subview(model_view),this.$(".list-container").append(model_view.render().el);return this},FollowSuggestionsCollectionView.prototype.cleanupSubviews=function(){return _.each(this._subviews,function(subview){return subview.destroy()}),this._subviews=[]},FollowSuggestionsCollectionView.prototype.destroy=function(){return $(window).off("scroll"),FollowSuggestionsCollectionView.__super__.destroy.call(this)},FollowSuggestionsCollectionView}(window.HR.GenericView),HR=window.HR||{},HR.FollowSuggestionsCollectionView=FollowSuggestionsCollectionView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowSuggestionView,HR;return FollowSuggestionView=function(superClass){function FollowSuggestionView(){return FollowSuggestionView.__super__.constructor.apply(this,arguments)}return extend(FollowSuggestionView,superClass),FollowSuggestionView.prototype.template="follow/suggestion",FollowSuggestionView.prototype.className="psA follow-suggestion",FollowSuggestionView.prototype.events=function(){return{"click .follow-user":"followUser","mouseout .follow-user":function(e){return $(e.target).removeClass("unfollowed")}}},FollowSuggestionView.prototype.initialize=function(options){return this.page=options.page?options.page:"",this.show_follow_icon="treatment1"===HR.ABTest.get_variant("followpages")},FollowSuggestionView.prototype.toggleTooltip=function(el,title){return this.show_follow_icon?(el.tooltip("hide").attr("data-original-title",""+title).tooltip("fixTitle"),el):void 0},FollowSuggestionView.prototype.followUser=function(e){var that;return e.preventDefault(),that=this,this.model.is_following?this.model.unfollow({callback:function(){return that.$(".follow-user").removeClass("active").addClass("unfollowed"),that.show_follow_icon||that.$(".follow-user").text("Follow"),$(that.el).removeClass("following"),that.toggleTooltip(that.$(".follow-user"),"Follow"),hr_metrics.track("Click","hrFollowButton",{attribute1:that.page,attribute2:"Unfollow"})}}):this.model.follow({callback:function(){return that.$(".follow-user").addClass("active"),that.show_follow_icon||that.$(".follow-user").text("Following"),$(that.el).addClass("following"),that.toggleTooltip(that.$(".follow-user"),"Unfollow"),hr_metrics.track("Click","hrFollowButton",{attribute1:that.page,attribute2:"Follow"})}}),this},FollowSuggestionView.prototype.render=function(){var addClass,that;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,show_follow_icon:this.show_follow_icon})),this.show_follow_icon&&this.$(".follow-user").tooltip(),that=this,addClass=function(){return that.model.is_following?$(that.el).addClass("following"):void 0},setTimeout(addClass,5),this},FollowSuggestionView}(window.HR.GenericView),HR=window.HR||{},HR.FollowSuggestionView=FollowSuggestionView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var FollowUserSnippetView,HR;return FollowUserSnippetView=function(superClass){function FollowUserSnippetView(){return FollowUserSnippetView.__super__.constructor.apply(this,arguments)}return extend(FollowUserSnippetView,superClass),FollowUserSnippetView.prototype.template="followusersnippet",FollowUserSnippetView.prototype.className="span-third follow-user-snippet",FollowUserSnippetView.prototype.events=function(){return{"click .follow-user":"followUser","mouseout .follow-user":function(e){return $(e.target).removeClass("unfollowed")}}},FollowUserSnippetView.prototype.initialize=function(options){return this.show_follow_icon=!0},FollowUserSnippetView.prototype.followUser=function(e){var that;return e.preventDefault(),that=this,this.model.get("is_following")?this.model.unfollow({callback:function(){return that.$(".follow-user").removeClass("active").addClass("unfollowed"),that.model.set("is_following",!1),that.show_follow_icon||that.$(".follow-user").text("Follow"),that.toggleTooltip(that.$(".follow-user"),"Follow"),hr_metrics.track("Click","hrFollowButton",{attribute1:"network",attribute2:"Unfollow"})}}):this.model.follow({callback:function(){return that.$(".follow-user").addClass("active"),that.model.set("is_following",!0),that.show_follow_icon||that.$(".follow-user").text("Following"),that.toggleTooltip(that.$(".follow-user"),"Unfollow"),hr_metrics.track("Click","hrFollowButton",{attribute1:"network",attribute2:"Follow"})}}),this},FollowUserSnippetView.prototype.toggleTooltip=function(el,title){return this.show_follow_icon?(el.tooltip("hide").attr("data-original-title",""+title).tooltip("fixTitle"),el):void 0},FollowUserSnippetView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model,show_follow_icon:this.show_follow_icon})),this.show_follow_icon&&this.$(".follow-user").tooltip(),this},FollowUserSnippetView}(window.HR.GenericView),HR=window.HR||{},HR.FollowUserSnippetView=FollowUserSnippetView})}.call(this),function(){jQuery(function(){var HR,changeSelect2SchoolDialog,ref;return changeSelect2SchoolDialog=function(entity_type,entity_name,successCallback,cancelCallback){var dialog;return null==entity_name&&(entity_name=""),null==successCallback&&(successCallback=null),null==cancelCallback&&(cancelCallback=null),dialog=new HR.util.ShowFormDialog({title:"Add a new "+entity_type+":",width:650,fullwidth:!0,label_width:5,fields:[{name:"entity_name",title:"Name*",value:entity_name,type:"text"},{name:"url",title:"Official Website",type:"text"}],buttons:[{name:"Add","class":"btn-primary hr-dialog-button",callback:function(dialog){var data;return data={},_.each(dialog.$form().serializeArray(),function(x){return data[x.name]=x.value}),data.entity_name?!HR.util.badURLValidator(data.url)&&data.url?(dialog.form_unset_alert(),void dialog.form_set_error("The URL is invalid")):(successCallback&&successCallback(data),dialog.destroy()):(dialog.form_unset_alert(),void dialog.form_set_error("A required field is empty"))}},{name:"Cancel","class":"hr-dialog-button",callback:function(dialog){return cancelCallback&&cancelCallback(),dialog.destroy()}}]}),dialog.render()},HR=null!=(ref=window.HR)?ref:{},HR.util||(HR.util={}),HR.util.changeSelect2SchoolDialog=changeSelect2SchoolDialog})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SecondaryEmailView,ref;return SecondaryEmailView=function(superClass){function SecondaryEmailView(){return SecondaryEmailView.__super__.constructor.apply(this,arguments)}return extend(SecondaryEmailView,superClass),SecondaryEmailView.prototype.template="secondary-email",SecondaryEmailView.prototype.tagName="p",SecondaryEmailView.prototype.className="static-input span16 email-container",SecondaryEmailView.prototype.initialize=function(options){return this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render)},SecondaryEmailView.prototype.events={"click a.settings_email_make_primary":"make_primary","click a.settings_email_resend_verification":"resend_verification","click a.settings_email_remove":"remove_email"},SecondaryEmailView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model})),this},SecondaryEmailView.prototype.make_primary=function(e){return e.preventDefault(),$(e.currentTarget).html("Making..."),this.model.make_primary(function(_this){return function(data){return $(e.currentTarget).html("Done!"),_this.collection.fetch()}}(this))},SecondaryEmailView.prototype.remove_email=function(e){return e.preventDefault(),$(e.currentTarget).html("Removing..."),this.model.destroy({success:function(_this){return function(model,response){return $(e.currentTarget).html("Removed!"),_this.collection.fetch()}}(this)})},SecondaryEmailView.prototype.resend_verification=function(e){return e.preventDefault(),$(e.currentTarget).html("Sending..."),this.model.resend_confirmation(function(data){return $(e.currentTarget).html("Sent! Resend?")})},SecondaryEmailView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SecondaryEmailView=SecondaryEmailView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SecondaryEmailsView,ref;return SecondaryEmailsView=function(superClass){function SecondaryEmailsView(){return SecondaryEmailsView.__super__.constructor.apply(this,arguments)}return extend(SecondaryEmailsView,superClass),SecondaryEmailsView.prototype.url="/rest/secondary_emails",SecondaryEmailsView.prototype.template="secondary-emails",SecondaryEmailsView.prototype.initialize=function(options){return this.input="",this.errors=[],this.listenTo(this.collection,"reset change add sync",this.render)},SecondaryEmailsView.prototype.events={"click a#btn-add-sec-email":"showAddEmail","click button#secondary-email-cancel-button":"hideAddEmail","click button#secondary-email-add-button":"commitEmail"},SecondaryEmailsView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({errors:this.errors,input:this.input})),_.each(this.collection.models,function(item){var _view;return _view=new HR.SecondaryEmailView({model:item,collection:this.collection}),$(this.el).find("div#secondary-email-list").append(_view.render().el),this.add_subview(_view)},this),this},SecondaryEmailsView.prototype.hideAddEmail=function(e){return e.preventDefault(),this.$("#add-new-secondary-email").hide(),this.$("a#btn-add-sec-email").show()},SecondaryEmailsView.prototype.showAddEmail=function(e){return e.preventDefault(),this.$("#add-new-secondary-email").show(),this.$("#add-new-secondary-email input").focus(),this.$(e.currentTarget).hide()},SecondaryEmailsView.prototype.commitEmail=function(e){var email,mdl;return e.preventDefault(),(email=_.escape($("#secondary-email-input").val()))?($(e.currentTarget).html("Adding..."),this.input="",this.errors=[],mdl=new this.collection.model({email:email},{collection:this.collection}),mdl.save({},{success:function(_this){return function(){return _this.collection.fetch(),$("#secondary-email-input").val("")}}(this),error:function(_this){return function(modl,xhr,options){return _this.errors=$.parseJSON(xhr.responseText).errors,_this.input=email,_this.render()}}(this)})):void 0},SecondaryEmailsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SecondaryEmailsView=SecondaryEmailsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsAccountView,ref;return SettingsAccountView=function(superClass){function SettingsAccountView(){return SettingsAccountView.__super__.constructor.apply(this,arguments)}return extend(SettingsAccountView,superClass),SettingsAccountView.prototype.template="settings-account",SettingsAccountView.prototype.className="settings-account-view",SettingsAccountView.prototype.events=function(){return{"click .btn-github":"githubLogin","click .btn-facebook":"facebookLogin","click .btn-linkedin":"linkedinLogin","click .btn-merge":"showModal","click .btn-merge-accounts-ok":"mergeAccounts","click .btn-delete-account":"deleteAccount","click .btn-delete-survey":"surveyButton","click .btn-delete-account-modal":"deleteAccountModal","click .btn-unsubscribe":"unsubscribeEmail","click .btn-no-delete-account":"noDeleteAccount","keyup .delete-hacker-password":"deleteAccountButton"}},SettingsAccountView.prototype.initialize=function(options){var secondary_emails_collection;return this.subViews||(this.subViews=[]),this.parent=options.parent,this.profile=options.profile||HR.profile(),this.listenTo(this.model,"reset",this.render),secondary_emails_collection=HR.collection("secondary-email"),secondary_emails_collection.fetch(),this.secondary_emails=new HR.SecondaryEmailsView({parent:this,collection:secondary_emails_collection}),this.add_subview(this.secondary_emails),this.render()},SettingsAccountView.prototype.usernameHintText=function(count){return 2===count?"You have 2 changes left.":1===count?"You have 1 change left.":"This cannot be changed anymore"},SettingsAccountView.prototype.fields=function(){var username_change_remain;return username_change_remain=Math.max(this.model.usernameChangeMax()-parseInt(this.model.get("username_change_count")||0,10),0),[{label:"Your Username",slug:"username",value:this.model.get("username"),model:this.model,disable_autosave:!0,hint:"This is how users will see you on HackerRank. "+this.usernameHintText(username_change_remain),
disabled:0>=username_change_remain,success_callback:function(that,data){return username_change_remain=Math.max(that.field.model.usernameChangeMax()-parseInt(data.model.username_change_count||0,10),0),that.$("span.sub-help").text("This is how users will see you on HackerRank. "+that.usernameHintText(usernameHintText)),0>=username_change_remain?that.$("input").prop("disabled",!0):void 0}}]},SettingsAccountView.prototype.render=function(){var fields_container,that;return that=this,$(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),this.secondary_emails.setElement($(this.el).find("#settings_emails")).render(),that=this,fields_container=$(),_.each(this.fields(),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this),this.$(".js-fields-wrapper").append(fields_container),this.model.get("errors")&&this.$(".input-v2-error").html(this.model.get("errors").username),this},SettingsAccountView.prototype.showModal=function(e){return this.$(".merge_accounts_popup").modal("show")},SettingsAccountView.prototype.mergeAccounts=function(e){var merge,other,other_email,username;return this.$(".merge_accounts_popup").modal("hide"),username=this.model.get("username"),e.preventDefault(),merge=new HR.HackerMerge,other=this.$("#mergeaccounts").val(),other_email=this.$("#mergeaccountsemail").val(),merge.save({username:other,email:other_email},{success:function(_this){return function(model,response,options){return _this.$(".merge-response").addClass("success").removeClass("error").html("Great! We have sent a confirmation email to "+other_email+". Please click the 'Confirm' link in the email to confirm the merge. Please note that the merge may take up to 48 hours to be processed.")}}(this),error:function(_this){return function(model,xhr,options){return _this.$(".merge-response").addClass("error").removeClass("success").html(JSON.parse(xhr.responseText).message)}}(this)}),this.saveChanges()},SettingsAccountView.prototype.deleteAccountButton=function(e){var button,password;return e.preventDefault(),this.$(".delete-response").html(""),password=this.$(".delete-hacker-password").val(),button=this.$(".btn-delete-account"),password.length>0?(button.removeClass("disabled"),button.addClass("btn-alert")):(button.addClass("disabled"),button.removeClass("btn-alert"))},SettingsAccountView.prototype.deleteAccountModal=function(e){return this.$(".delete-modal-1").modal("show")},SettingsAccountView.prototype.noDeleteAccount=function(e){return e.preventDefault(),this.$(".delete-modal-2").modal("hide"),this.$(".delete-modal-3").modal("show")},SettingsAccountView.prototype.unsubscribeEmail=function(e){var model;return model=HR.model("email-preferences",{username:this.profile.get("username")}).cached({success:function(model){return model.save("subscription_level",2,{success:function(model,response,options){var hacker;return hacker=HR.profile(),hacker.set("unsub_focus",!0),HR.router.navigate("/settings/email-preferences",{trigger:!0,replace:!1})}})}})},SettingsAccountView.prototype.surveyButton=function(e){var checkedValues,hs;return e.preventDefault(),checkedValues=_.map(this.$(".delete-survey:checked"),function(e){return $(e).val()}),checkedValues.includes("0")?(this.$(".delete-modal-1").modal("hide"),this.$(".delete-modal-2").modal("show")):(this.$(".delete-modal-1").modal("hide"),this.$(".delete-modal-3").modal("show")),hs=new HR.HackerSurveyModel({hacker_id:this.profile.get("id"),survey_slug:"delete-hacker-survey",answer:JSON.stringify(checkedValues)}),hs.save()},SettingsAccountView.prototype.deleteAccount=function(e){var button,hacker,password,that;return e.preventDefault(),button=this.$(".btn-delete-account"),button.hasClass("disabled")?void 0:(button.addClass("disabled"),password=this.$(".delete-hacker-password").val(),hacker=this.profile,that=this,hacker.destroy({data:{password:password},processData:!0,beforeSend:function(xhr){return xhr.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},success:function(model,response){return that.$(".delete-response").addClass("error").removeClass("success").html(response.message),button.removeClass("disabled"),response.status?that.logout():void 0},error:function(model,response){return that.$(".delete-response").addClass("error").removeClass("success").html("Something wrong with the server..."),button.removeClass("disabled")}}))},SettingsAccountView.prototype.logout=function(){return $.ajax({url:"/auth/logout",type:"DELETE",beforeSend:function(xhr){return xhr.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},success:function(data){return document.location.href=document.location.protocol+"//"+document.location.host}})},SettingsAccountView.prototype.githubLogin=function(e){return HR.appController.github_login(e)},SettingsAccountView.prototype.facebookLogin=function(e){return HR.appController.facebook_login(e)},SettingsAccountView.prototype.linkedinLogin=function(e){return HR.appController.linkedin_login(e)},SettingsAccountView.prototype.saveChanges=function(e){var data,that;return that=this,data=this.getData(),_.each(data,function(val,field){return that.model.set(field,val,{silent:!0})}),this.parent.saveModel(this.model),this.render(),hr_metrics.track("SaveSettings","Account")},SettingsAccountView.prototype.isUpdated=function(){var changed,data,that;return that=this,changed=!1,changed=this.$("#mergeaccounts").val()||this.$("#secondary-email-input").val(),changed||(data=this.getData(),_.each(data,function(val,field){return that.model.get(field)&&that.model.get(field)!==val?changed=!0:void 0})),changed},SettingsAccountView.prototype.getData=function(){return{username:this.$("input#username").val()}},SettingsAccountView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsAccountView=SettingsAccountView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsBioView,ref;return SettingsBioView=function(superClass){function SettingsBioView(){return SettingsBioView.__super__.constructor.apply(this,arguments)}return extend(SettingsBioView,superClass),SettingsBioView.prototype.template="settings-bio",SettingsBioView.prototype.className="settings-bio-view",SettingsBioView.prototype.initialize=function(options){return this.subViews||(this.subViews=[]),this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.maxlength=420,this.render()},SettingsBioView.prototype.events=function(){return{"keyup #short_bio":"updateRemaingCharacter"}},SettingsBioView.prototype.fields=function(){return[{label:"Website",slug:"website",value:this.model.get("website"),model:this.model,hint:"So others can find your homepage or blog",placeholder:"http://www.yourwebsite.com"},{label:"About",slug:"short_bio",value:this.model.get("short_bio"),model:this.model,type:"textarea",hint:"Tell the world just how awesome you are",maxlength:this.maxlength}]},SettingsBioView.prototype.updateRemaingCharacter=function(){var text_length,text_remaining;return text_length=this.$("#short_bio").val().length,text_remaining=this.maxlength-text_length,this.$("#text-remaining-chars").html(text_remaining+" characters remaining")},SettingsBioView.prototype.render=function(){var fields_container;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),$(this.el).find(".switch").bootstrapSwitch(),fields_container=$(),_.each(this.fields(),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this),this.$(".js-fields-wrapper").append(fields_container)},SettingsBioView.prototype.destroy=function(){return SettingsBioView.__super__.destroy.call(this)},SettingsBioView.prototype.saveChanges=function(e){var data,that;return that=this,data=this.getData(),_.each(data,function(val,field){return that.model.set(field,val,{silent:!0})}),this.parent.saveModel(this.model),this.render(),hr_metrics.track("SaveSettings","Profile")},SettingsBioView.prototype.isUpdated=function(){var changed,data,that;return that=this,data=this.getData(),changed=!1,_.each(data,function(val,field){return"tsize"===field||"local_language"===field||"country"===field?that.model.get(field)||"--"===val||(changed=!0):that.model.get(field)||""===val||(changed=!0),that.model.get(field)&&that.model.get(field)!==val?changed=!0:void 0}),changed},SettingsBioView.prototype.getData=function(){var data;return data={website:this.$("input#website").val(),short_bio:this.$("textarea#short_bio").val()}},SettingsBioView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsBioView=SettingsBioView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsCampusRepProgramView,ref;return SettingsCampusRepProgramView=function(superClass){function SettingsCampusRepProgramView(){return SettingsCampusRepProgramView.__super__.constructor.apply(this,arguments)}return extend(SettingsCampusRepProgramView,superClass),SettingsCampusRepProgramView.prototype.template="settings-campus-rep-program",SettingsCampusRepProgramView.prototype.className="settings-campus-rep-program-view",SettingsCampusRepProgramView.prototype.initialize=function(options){return this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.referrals=HR.appController.getCollection("campus-rep-stats-collection"),this.listenTo(this.referrals,"reset",this.render),this.listenTo(this.referrals,"change",this.render),this.referral},SettingsCampusRepProgramView.prototype.render=function(){return this.model.sync_status&&this.referrals.sync_status?$(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),referrals:this.referrals.toJSON()})):$(this.el).html(HR.appController.viewLoader(64)),this},SettingsCampusRepProgramView.prototype.saveChanges=function(e){return hr_metrics.track("SaveSettings","Campus Rep")},SettingsCampusRepProgramView.prototype.isUpdated=function(){return!1},SettingsCampusRepProgramView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsCampusRepProgramView=SettingsCampusRepProgramView})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsChangePasswordView,ref;return SettingsChangePasswordView=function(superClass){function SettingsChangePasswordView(){return this.hideMessage=bind(this.hideMessage,this),this.showMessage=bind(this.showMessage,this),this.enableSave=bind(this.enableSave,this),this.showSavingMsg=bind(this.showSavingMsg,this),SettingsChangePasswordView.__super__.constructor.apply(this,arguments)}return extend(SettingsChangePasswordView,superClass),SettingsChangePasswordView.prototype.template="settings-change-password",SettingsChangePasswordView.prototype.className="settings-change-password-view",SettingsChangePasswordView.prototype.events={"click .change_password_button":"saveChanges"},SettingsChangePasswordView.prototype.initialize=function(options){return this.parent=options.parent,this.render()},SettingsChangePasswordView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),this},SettingsChangePasswordView.prototype.showSavingMsg=function(){return this.parent.showSavingMsg(),this.$(".change_password_button").html("Changing"),this.$(".change_password_button").addClass("disabled")},SettingsChangePasswordView.prototype.enableSave=function(success){return this.$(".change_password_button").html("Change Password"),this.$(".change_password_button").removeClass("disabled"),success===!0?this.parent.saveCallback():this.parent.saveCallback("There was an error changing your password, please try again")},SettingsChangePasswordView.prototype.showMessage=function(message,success){return this.$(".password-alert").removeClass("error success"),this.$(".password-alert").html(message).parent().fadeIn(),success?this.$(".password-alert").addClass("success"):this.$(".password-alert").addClass("error")},SettingsChangePasswordView.prototype.hideMessage=function(message,success){return this.$(".password-alert").html(message).parent().fadeOut(),this.parent.hideSaveSuccess()},SettingsChangePasswordView.prototype.saveChanges=function(e){var change_password,error;return change_password={},change_password.current_password=this.$("#current_password").val(),change_password.new_password=this.$("#new_password").val(),change_password.confirm_password=this.$("#confirm_password").val(),this.hideMessage(),error=null,change_password.current_password?change_password.current_password.length<6||change_password.confirm_password.length<6?error="Your new password must be at least 6 characters in length.":change_password.new_password!==change_password.confirm_password&&(error="Your new password and confirmation don't match."):error="You must enter your current password.",error?this.showMessage(error,!1):(this.showSavingMsg(),$.ajax({url:"/rest/change_password",type:"POST",data:{current_password:change_password.current_password,new_password:change_password.new_password,confirm_password:change_password.confirm_password},success:function(_this){return function(data){return data.ok?(_this.showMessage(data.message,!0),_this.$(".formgroup input,textarea").val(""),_this.enableSave(!0)):(_this.showMessage(data.message,!1),_this.enableSave(!1))}}(this)})),hr_metrics.track("SaveSettings","Change Password")},SettingsChangePasswordView.prototype.isUpdated=function(){return this.$("#current_password").val()||this.$("#new_password").val()||this.$("#confirm_password").val()},SettingsChangePasswordView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsChangePasswordView=SettingsChangePasswordView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsEmailPreferencesNewView,ref;return SettingsEmailPreferencesNewView=function(superClass){function SettingsEmailPreferencesNewView(){return SettingsEmailPreferencesNewView.__super__.constructor.apply(this,arguments)}return extend(SettingsEmailPreferencesNewView,superClass),SettingsEmailPreferencesNewView.prototype.template="settings-email-preferences-new",SettingsEmailPreferencesNewView.prototype.className="settings-email-preferences-new-view",SettingsEmailPreferencesNewView.prototype.initialize=function(options){return this.profile=options.profile,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"sync",this.render),this.unsub_collection=new HR.HackerUnsubscriptionCollection,this.unsub_collection.fetch({success:function(_this){return function(){return _this.render()}}(this)})},SettingsEmailPreferencesNewView.prototype.events={"change input[name=subscription_level]:checked":"saveSubscriptionLevel","click ul#unsub-pref-list li span button":"unsubPrefChanged","click .dismiss-modal":"setUnsubFocus"},SettingsEmailPreferencesNewView.prototype.render=function(){var that;return this.has_template?this.renderCurrentView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderCurrentView()},this),that=this,HR.profile().get("unsub_focus")&&setTimeout(function(){return that.$(".subscription-level-imp-modal").modal("hide"),that.$(".subscription-level-imp-modal").modal("show")},500),this},SettingsEmailPreferencesNewView.prototype.renderCurrentView=function(){var that;return that=this,this._template&&this.model.sync_status&&this.unsub_collection.sync_status&&($(this.el).html(this._template({model:this.model.toJSON(),unsub_collection:this.unsub_collection.unsubscribed_values()})),this.delegateEvents()),this},SettingsEmailPreferencesNewView.prototype.setUnsubFocus=function(e){return e.preventDefault(),HR.profile().set("unsub_focus",!1)},SettingsEmailPreferencesNewView.prototype.saveSubscriptionLevel=function(e){var $elem;return e.preventDefault(),$elem=$(e.currentTarget),this.model.set("subscription_level",parseInt($elem.val())),this.model.save()},SettingsEmailPreferencesNewView.prototype.unsubPrefChanged=function(e){var $elem,$li_elem,model,that;return e.preventDefault(),$elem=$(e.currentTarget),model=this.unsub_collection.get($elem.data("model-id")),null!=model?(model.set("value",!0),model.save(),$li_elem=this.$("#unsub-pref-id-"+model.get("id")),$li_elem.find(".opted-out-block").hide(),$li_elem.find(".opted-in-block").show(),that=this,setTimeout(function(){return $li_elem.hide("slow",function(){return 0===that.unsub_collection.unsubscribed_values().length?that.$(".unsub-pref-empty-message").show():void 0})},4e3)):void 0},SettingsEmailPreferencesNewView.prototype.isUpdated=function(){return!1},SettingsEmailPreferencesNewView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsEmailPreferencesNewView=SettingsEmailPreferencesNewView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsEmailPreferencesView,ref;return SettingsEmailPreferencesView=function(superClass){function SettingsEmailPreferencesView(){return SettingsEmailPreferencesView.__super__.constructor.apply(this,arguments)}return extend(SettingsEmailPreferencesView,superClass),SettingsEmailPreferencesView.prototype.template="settings-email-preferences",SettingsEmailPreferencesView.prototype.className="settings-email-preferences-view",SettingsEmailPreferencesView.prototype.initialize=function(options){return this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"sync",this.render),this.profile=options.profile,this.disable_metrics=options.disable_metrics||!1,this.profile&&(this.listenTo(this.profile,"change",this.fetchModel),this.listenTo(this.profile,"reset",this.fetchModel)),this.settings_to_display=options.settings,this.render()},SettingsEmailPreferencesView.prototype.events={"click .email-preference-option input[type='checkbox']":"checkboxClicked","click #optout-div input[type='checkbox']":"checkboxClicked","click .global-toggle":"globalOptionClicked","click .reset-to-default":"setToDefault","click button#email-save-btn":"saveData","click .list-container-block":"opt_in","click #forum_tagged_or_expertise":"changeForumExpertiseComment"},SettingsEmailPreferencesView.prototype.parent_option={ai_challenge:"all_challenge",ml_challenge:"all_challenge",algo_challenge:"all_challenge",fp_challenge:"all_challenge",code_golf_challenge:"all_challenge",weekly_contest:"all_contest",hack101_contest:"all_contest",adinfinitum_contest:"all_contest",lambda_calculi_contest:"all_contest",codesprint_contest:"all_contest",blog_cs:"blog",blog_hr:"blog",all_editorial:"editorial_global",challenge_editorial:"editorial_global",contest_editorial:"editorial_global",messaging_reply:"messaging",messaging_receive:"messaging",rating_contest:"rating",rating_practice:"rating",forum_tagged_or_expertise:"forum_global",forum_comment:"forum_global",forum_tagged_comment:"forum_global",forum_expertise_comment:"forum_global",forum_participate_comment:"forum_global"},SettingsEmailPreferencesView.prototype.globalOptionClicked=function(object){var clickedElements,element,option,ref,results,state,value;clickedElements=$(object.target).attr("id").split("-"),state="all"===clickedElements[0]?!0:!1,option=clickedElements[1],ref=this.model.attributes,results=[];for(element in ref)value=ref[element],$("#"+element+"_"+option).length?results.push($("#"+element+"_"+option).prop("checked",state)):results.push(void 0);return results},SettingsEmailPreferencesView.prototype.render=function(){return this.has_template?this.renderCurrentView():HR.appController.getTemplate(this.template,function(template){return this.has_template=!0,this._template=template,this.renderCurrentView()},this),this},SettingsEmailPreferencesView.prototype.renderCurrentView=function(){var that;return that=this,this._template&&this.model.sync_status&&($(this.el).html(this._template({model:this.model.toJSON(),settings_to_display:this.settings_to_display,display_name:this.displayName()})),this.settings_to_display.main_view!==!0&&this.renderCompanyPreferences(),window.setTimeout(that.setCheckboxes,0,that),this.delegateEvents()),this},SettingsEmailPreferencesView.prototype.renderCompanyPreferences=function(){return this.hackerCompanyPreferencesCollection=HR.collection("hacker-company-preferences"),this.hackerCompanyPreferencesCollection.fetch({success:function(_this){return function(){return _this.hackerCompanyPreferencesCollectionView||(_this.hackerCompanyPreferencesCollectionView=new HR.HackerCompanyPreferencesCollectionView({collection:_this.hackerCompanyPreferencesCollection})),_this.assign({"#company-preferences":_this.hackerCompanyPreferencesCollectionView}),_this.add_subview(_this.hackerCompanyPreferencesCollectionView)}}(this)})},SettingsEmailPreferencesView.prototype.changeForumExpertiseComment=function(e){var $current,$target;return $current=$(e.currentTarget),$target=this.$("#forum_expertise_comment"),!$current.is(":checked")&&$target.is(":checked")?($target.click(),$($target).parent().parent().removeClass("is-checked")):void 0},SettingsEmailPreferencesView.prototype.checkboxClicked=function(object){var list_container_block,object_parent,value;return value=$(object.target).prop("checked"),object_parent=$(object.target).parent().parent(),object_parent.is("li")&&!object_parent.hasClass("disabled")&&(value?object_parent.addClass("is-checked"):object_parent.removeClass("is-checked")),"optout"===$(object.target).attr("id")&&(list_container_block=$(".list-container-block"),$(object.target).prop("checked")?($(object.target).parent().parent().addClass("is-checked"),list_container_block.attr("rel","tooltip"),list_container_block.attr("data-original-title","You have opted out of all the emails. To receive emails, please opt in again."),list_container_block.attr("data-placement","right"),$(".email-setting-group").addClass("disabled"),$(".email-preference-option").removeClass("active"),$(".email-preference-option").addClass("disabled"),$(".email-preference-chbox").prop("disabled",!0)):($(object.target).parent().parent().removeClass("is-checked"),list_container_block.removeAttr("rel"),list_container_block.removeAttr("data-original-title"),list_container_block.removeAttr("data-placement"),$(".email-setting-group").removeClass("disabled"),$(".email-preference-chbox").prop("disabled",!1),$(".email-preference-option").addClass("active"),$(".email-preference-option").removeClass("disabled"))),this.settings_to_display.auto_save===!0&&this.autoSave(),this.disable_metrics||hr_metrics.track("ToggleEmailPreference",$(object.target).attr("id"),{attribute11:value}),!0},SettingsEmailPreferencesView.prototype.setCheckboxes=function(object){var element,list_container_block,ref,results,value;object.model.unset("reset_to_default"),ref=object.model.attributes,results=[];for(element in ref)value=ref[element],"optout"===element?($("#optout").prop("checked",value),list_container_block=$(".list-container-block"),value===!0?($("#optout").parent().parent().addClass("is-checked"),list_container_block.attr("rel","tooltip"),list_container_block.attr("data-original-title","You have opted out of all the emails. To receive emails, please opt in again."),list_container_block.attr("data-placement","right"),$(".email-setting-group").addClass("disabled"),$(".email-preference-option").removeClass("active"),$(".email-preference-option").addClass("disabled"),results.push($(".email-preference-chbox").prop("disabled",!0))):($("#optout").parent().parent().removeClass("is-checked"),list_container_block.removeAttr("rel"),list_container_block.removeAttr("data-original-title"),list_container_block.removeAttr("data-placement"),$(".email-setting-group").removeClass("disabled"),$(".email-preference-chbox").prop("disabled",!1),$(".email-preference-option").addClass("active"),results.push($(".email-preference-option").removeClass("disabled")))):$("#"+element+"_email").length?value>4?($("#"+element+"_email").prop("checked",!0),results.push($("#"+element+"_email").parent().parent().addClass("is-checked"))):results.push(void 0):$("#"+element).length&&value>2?($("#"+element).prop("checked",!0),results.push($("#"+element).parent().parent().addClass("is-checked"))):results.push(void 0);return results},SettingsEmailPreferencesView.prototype.opt_in=function(){return $("#optout").prop("checked")&&($("html,body").animate({scrollTop:$("#optout-div").offset().top},"fast"),!this.disable_metrics)?hr_metrics.track("Click","SettingsEmailPreferencesHoverOptin"):void 0},SettingsEmailPreferencesView.prototype.encoding=function(email,notif){return email===!0&&notif===!0?6:notif===!0?4:email===!0?8:2},SettingsEmailPreferencesView.prototype.encoding_no_minimal=function(email){return email===!0?6:4},SettingsEmailPreferencesView.prototype.encoding_minimal=function(option){return option===!0?4:2},SettingsEmailPreferencesView.prototype.saveChanges=function(e){return this.disable_metrics||hr_metrics.track("SaveSettings","Email Preferences"),!0},SettingsEmailPreferencesView.prototype.showSavingMsg=function(){return $("#email-save-status").html("Saving...."),this.disableSave()},SettingsEmailPreferencesView.prototype.saveCallback=function(message){return null==message&&(message=""),$("#email-save-status").html(message),this.enableSave()},SettingsEmailPreferencesView.prototype.disableSave=function(){return $(".settings_save").attr("disabled","disabled")},SettingsEmailPreferencesView.prototype.enableSave=function(){return $(".settings_save").removeAttr("disabled")},SettingsEmailPreferencesView.prototype.saveModel=function(model){var that;return this.showSavingMsg(),that=this,model.save(null,{success:function(){return that.saveCallback("Changes saved")},error:function(){return that.saveCallback("There was some error while saving your data. Please try again.")}})},SettingsEmailPreferencesView.prototype.autoSave=function(){var error;try{return this.settings_to_display.auto_save=!1,this.isUpdated()?this.saveModel(this.model):this.saveCallback("Already up to date")}catch(error1){throw error=error1}finally{this.settings_to_display.auto_save=!0}},SettingsEmailPreferencesView.prototype.saveData=function(e){return e.preventDefault(),this.isUpdated()?this.saveModel(this.model):this.saveCallback("Already up to date")},SettingsEmailPreferencesView.prototype.isUpdated=function(){var changed,element,email_value,notif_value,option_value,ref,store_value,that,value;that=this,changed=!1,ref=this.model.attributes;for(element in ref)value=ref[element],"optout"===element?(store_value=$("#optout").prop("checked"),value!==store_value&&(this.model.set(element,store_value),changed=!0)):$("#"+element+"_email").length?(email_value=$("#"+element+"_email").prop("checked"),notif_value=value>2&&7>value?!0:!1,store_value=this.encoding(email_value,notif_value),value!==store_value-1&&value!==store_value&&(this.model.set(element,store_value),changed=!0)):"username"!==element&&$("#"+element).length&&(option_value=$("#"+element).prop("checked"),store_value=this.encoding(option_value),value!==store_value-1&&value!==store_value&&(3!==value||8!==store_value)&&(this.model.set(element,store_value),changed=!0));return this.settings_to_display.submit_button||this.settings_to_display.no_button||this.parent.saveModel(this.model),changed},SettingsEmailPreferencesView.prototype.setToDefault=function(){var that;return this.model.set("reset_to_default",!0),this.settings_to_display.submit_button?(that=this,this.model.save(null,{success:function(){return that.saveCallback("Changes Saved")},error:function(){return that.saveCallback("There was some error while saving your data. Please try again.")}})):this.model.save()},SettingsEmailPreferencesView.prototype.displayName=function(){return this.model.get("hacker_id")===HR.profile().get("id")?"yourself":this.model.get("username")},SettingsEmailPreferencesView.prototype.fetchModel=function(){return this.model.fetch()},SettingsEmailPreferencesView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsEmailPreferencesView=SettingsEmailPreferencesView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsJobsView,ref;return SettingsJobsView=function(superClass){function SettingsJobsView(){return SettingsJobsView.__super__.constructor.apply(this,arguments)}return extend(SettingsJobsView,superClass),SettingsJobsView.prototype.template="settings-jobs",SettingsJobsView.prototype.className="settings-jobs-view",SettingsJobsView.prototype.events={"click input[name='is_professional']":"saveIsProfessional","click input[name='us_work_eligibility']":"saveVisaRequirement","click input[id = 'country']":"saveCountry"},SettingsJobsView.prototype.initialize=function(options){return this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.subViews||(this.subViews=[])},SettingsJobsView.prototype.fields1=function(){return[{label:"Name",slug:"name",hint:"Your full name",value:this.model.get("name"),model:this.model}]},SettingsJobsView.prototype.fields2=function(is_professional){var experience_map,graduation_year_options,years_of_experience_options;return graduation_year_options={data:_.map(_.range(2016,2021),function(date){return{id:date,text:String(date)}})},graduation_year_options.data[4].text="2020 and beyond",experience_map={0:"< 1 year",1:"1 year",2:"2 years",3:"3 years",4:"4 years",5:"5 years",6:">5 years"},years_of_experience_options={data:_.map(experience_map,function(time,id){return{id:id,text:time}})},is_professional?[{label:"Years Of Experience",slug:"years_of_experience",value:experience_map[this.model.get("years_of_experience")]||"--",model:this.model,type:"select2",select2_options:years_of_experience_options}]:[{label:"Expected year of graduation",slug:"graduation_year",value:this.model.get("graduation_year")||"--",model:this.model,type:"select2",select2_options:graduation_year_options}]},SettingsJobsView.prototype.fields3=function(){return[{label:"LinkedIn Profile",slug:"linkedin_url",value:this.model.get("linkedin_url"),model:this.model},{label:"Resume",slug:"resume",slug_out:"resume_url",value:this.model.get("resume_url"),model:this.model,type:"upload",preview:"gdocs"}]},SettingsJobsView.prototype.saveCountry=function(){var country;return country=this.$("input#country").val(),this.model.set({country:"country",country:country},{silent:!0}),this.model.save(null,{silent:!0})},SettingsJobsView.prototype.render=function(){var fields_container1,fields_container2,fields_container3;return $(this.el).html(HR.appController.template(this.template,this)({hacker:this.model})),_.each(this.subViews,function(view){return view.destroy()}),fields_container1=$(),_.each(this.fields1(),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container1.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this),setTimeout(function(_this){return function(){return _this.$("#country").select2({data:HR.util.country_select2_options.data}).select2("val",_this.model.get("country"))}}(this),400),(this.model.get("is_professional")===!0||this.model.get("is_professional")===!1)&&(fields_container2=$(),
_.each(this.fields2(this.model.get("is_professional")),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container2.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this)),fields_container3=$(),_.each(this.fields3(),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container3.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this),this.$(".js-fields-wrapper1").append(fields_container1),this.$(".js-fields-wrapper2").append(fields_container2),this.$(".js-fields-wrapper3").append(fields_container3)},SettingsJobsView.prototype.saveIsProfessional=function(e){return"true"===this.$('input[name="is_professional"]:checked').val()?this.model.set({is_professional:!0}):"false"===this.$('input[name="is_professional"]:checked').val()&&this.model.set({is_professional:!1}),this.model.save()},SettingsJobsView.prototype.saveVisaRequirement=function(e){return this.$('input[name="us_work_eligibility"]:checked').val()&&(this.model.set({us_citizenship:parseInt(this.$('input[name="us_work_eligibility"]:checked').val())},{silent:!0}),1===this.model.get("us_citizenship")||2===this.model.get("us_citizenship")?this.model.set({us_work_eligibility:!0},{silent:!0}):this.model.set({us_work_eligibility:!1},{silent:!0})),this.model.save()},SettingsJobsView.prototype.saveChanges=function(e){return hr_metrics.track("SaveSettings","Jobs")},SettingsJobsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsJobsView=SettingsJobsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsLanguageView,ref;return SettingsLanguageView=function(superClass){function SettingsLanguageView(){return SettingsLanguageView.__super__.constructor.apply(this,arguments)}return extend(SettingsLanguageView,superClass),SettingsLanguageView.prototype.template="settings-language",SettingsLanguageView.prototype.className="settings-language-view",SettingsLanguageView.prototype.initialize=function(options){return this.subViews||(this.subViews=[]),this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.render()},SettingsLanguageView.prototype.fields=function(){return[{label:"Preferred Language",slug:"local_language",value:this.model.get("local_language")||"--",model:this.model,type:"select2",select2_options:this.setupLocalLanguageSelect(),hint:"We will use this language to display problem statement wherever possible"}]},SettingsLanguageView.prototype.render=function(){var fields_container;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),$(this.el).find(".switch").bootstrapSwitch(),fields_container=$(),_.each(this.fields(),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this),this.$(".js-fields-wrapper").append(fields_container)},SettingsLanguageView.prototype.destroy=function(){return SettingsLanguageView.__super__.destroy.call(this)},SettingsLanguageView.prototype.setupLocalLanguageSelect=function(){var data,languages;return languages=HR.TRANSLATION_LANGUAGES,data=[],_.each(languages,function(code,name){return data.push({id:name,text:name})}),this.setLocalLanguage(this.model.get("local_language")||"--"),{data:data}},SettingsLanguageView.prototype.setLocalLanguage=function(local_language){return $(this.el).find("#local_language").val(local_language),$(this.el).find("#s2id_local_language .select2-choice span").text(local_language)},SettingsLanguageView.prototype.saveChanges=function(e){var data,that;return that=this,data=this.getData(),_.each(data,function(val,field){return that.model.set(field,val,{silent:!0})}),this.parent.saveModel(this.model),this.render(),hr_metrics.track("SaveSettings","Language")},SettingsLanguageView.prototype.isUpdated=function(){var changed,data,that;return that=this,data=this.getData(),changed=!1,_.each(data,function(val,field){return"local_language"===field&&(that.model.get(field)||"--"===val||(changed=!0)),that.model.get(field)&&that.model.get(field)!==val?changed=!0:void 0}),changed},SettingsLanguageView.prototype.getData=function(){return{local_language:this.$("#local_language").val()}},SettingsLanguageView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsLanguageView=SettingsLanguageView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsNetworkView;return SettingsNetworkView=function(superClass){function SettingsNetworkView(){return SettingsNetworkView.__super__.constructor.apply(this,arguments)}return extend(SettingsNetworkView,superClass),SettingsNetworkView.prototype.template="settings-network",SettingsNetworkView.prototype.className="settings-network-view",SettingsNetworkView.prototype.initialize=function(options){return this.network_subview=!1,this.updates=!1,this.parent=options.parent},SettingsNetworkView.prototype.isUpdated=function(){return this.updates},SettingsNetworkView.prototype.saveChanges=function(){return this.network_subview.saveIt(),this.updates=!1,this.render(),this.parent.saveCallback("Changes saved")},SettingsNetworkView.prototype.triggerEntityModified=function(){return $(this.el).trigger("addedEntityData")},SettingsNetworkView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({model:this.model})),this.network_subview||(this.network_subview=new HR.FollowEntityView({model:this.model,settings_page:!0,parent:this}),this.add_subview(this.network_subview)),this.$(".add-"+this.model.get("entity")).append(this.network_subview.render().el),this.delegateEvents(),this},SettingsNetworkView}(window.HR.GenericView),HR=window.HR||{},HR.SettingsNetworkView=SettingsNetworkView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsPrizesView,ref;return SettingsPrizesView=function(superClass){function SettingsPrizesView(){return SettingsPrizesView.__super__.constructor.apply(this,arguments)}return extend(SettingsPrizesView,superClass),SettingsPrizesView.prototype.template="settings-prizes",SettingsPrizesView.prototype.className="settings-prizes-view",SettingsPrizesView.prototype.initialize=function(options){return this.subViews||(this.subViews=[]),this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.render()},SettingsPrizesView.prototype.toggleCheckbox=function(e){return e.preventDefault(),$(e.currentTarget).hasClass("active")?($(e.currentTarget).removeClass("active").removeClass("active"),$(e.currentTarget).find("input").removeAttr("checked")):($(e.currentTarget).addClass("active").addClass("active"),$(e.currentTarget).find("input").attr("checked","checked")),this.saveChanges()},SettingsPrizesView.prototype.fields=function(){return[{label:"T-Shirt Size",slug:"tsize",value:this.model.get("tsize")||"--",model:this.model,type:"select2",select2_options:this.setupTShirtSizeSelect(),required:!0},{label:"Address line 1",slug:"address",value:this.model.get("address"),model:this.model,type:"text",required:!0},{label:"Address line 2 (optional)",slug:"address_line2",value:this.model.get("address_line2"),model:this.model,type:"text"},{label:"City",slug:"address_city",value:this.model.get("address_city"),model:this.model,type:"text",required:!0},{label:"State / Province / Region",slug:"address_state",value:this.model.get("address_state"),model:this.model,type:"text",required:!0},{label:"ZIP / Postal code",slug:"address_zip",value:this.model.get("address_zip"),model:this.model,type:"text",required:!0},{label:"Country",slug:"country_of_residence",value:this.model.get("country_of_residence")||"--",model:this.model,type:"select2",select2_options:HR.util.country_select2_options,required:!0},{label:"Phone number",slug:"phone_number",value:this.model.get("phone_number"),model:this.model,type:"text",required:!0}]},SettingsPrizesView.prototype.render=function(){var fields_container;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),$(this.el).find(".switch").bootstrapSwitch(),fields_container=$(),_.each(this.fields(),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this),this.$(".js-fields-wrapper").append(fields_container)},SettingsPrizesView.prototype.destroy=function(){return this.$("#tsize").select2("close"),this.$("#country_of_residence").select2("close"),SettingsPrizesView.__super__.destroy.call(this)},SettingsPrizesView.prototype.setupCountrySelect=function(){return $(this.el).find("#country_of_residence").select2(HR.util.country_select2_options),this.setCountry(this.model.get("country_of_residence")||"--")},SettingsPrizesView.prototype.setupTShirtSizeSelect=function(){return{data:[{id:"S",text:"S"},{id:"M",text:"M"},{id:"L",text:"L"},{id:"XL",text:"XL"},{id:"XXL",text:"XXL"}]}},SettingsPrizesView.prototype.getCountry=function(){return $(this.el).find("#country_of_residence").val()},SettingsPrizesView.prototype.setCountry=function(country_of_residence){return $(this.el).find("#country_of_residence").val(country_of_residence),$(this.el).find("#s2id_country_of_residence .select2-choice span").text(country_of_residence)},SettingsPrizesView.prototype.saveChanges=function(e){var data,that;return that=this,data=this.getData(),_.each(data,function(val,field){return that.model.set(field,val,{silent:!0})}),this.parent.saveModel(this.model),this.render(),hr_metrics.track("SaveSettings","Prizes")},SettingsPrizesView.prototype.isUpdated=function(){var changed,data,that;return that=this,data=this.getData(),changed=!1,_.each(data,function(val,field){return"tsize"===field||"country_of_residence"===field?that.model.get(field)||"--"===val||(changed=!0):that.model.get(field)||""===val||(changed=!0),that.model.get(field)&&that.model.get(field)!==val?changed=!0:void 0}),changed},SettingsPrizesView.prototype.getData=function(){var data;return data={country_of_residence:this.$("input#country_of_residence").val(),tsize:this.$("#tsize").val(),address:this.$("#address").val()}},SettingsPrizesView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsPrizesView=SettingsPrizesView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsProfileView,ref;return SettingsProfileView=function(superClass){function SettingsProfileView(){return SettingsProfileView.__super__.constructor.apply(this,arguments)}return extend(SettingsProfileView,superClass),SettingsProfileView.prototype.template="settings-profile",SettingsProfileView.prototype.className="settings-profile-view",SettingsProfileView.prototype.initialize=function(options){return this.subViews||(this.subViews=[]),this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this},SettingsProfileView.prototype.events=function(){return{"change .select-profile-dropdown":"recordChangeEvent"}},SettingsProfileView.prototype.toggleCheckbox=function(e){return e.preventDefault(),$(e.currentTarget).hasClass("active")?($(e.currentTarget).removeClass("active").removeClass("active"),$(e.currentTarget).find("input").removeAttr("checked")):($(e.currentTarget).addClass("active").addClass("active"),$(e.currentTarget).find("input").attr("checked","checked")),this.saveChanges()},SettingsProfileView.prototype.recordChangeEvent=function(e){return hr_metrics.track("SettingsProfileDropDownSelect",e.currentTarget.id,{attribute1:e.val})},SettingsProfileView.prototype.fields=function(){var username_change_remain;return username_change_remain=Math.max(this.model.usernameChangeMax()-parseInt(this.model.get("username_change_count")||0,10),0),[{label:"First Name",slug:"personal_first_name",value:this.model.get("personal_first_name"),success_callback:this.updateName,model:this.model},{label:"Last Name",slug:"personal_last_name",value:this.model.get("personal_last_name"),success_callback:this.updateName,model:this.model},{label:"Country of Representation",slug:"country",value:this.model.get("country")||"--",model:this.model,type:"select2",select2_options:HR.util.country_select2_options}]},SettingsProfileView.prototype.render=function(){var fields_container;return $(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON()})),fields_container=$(),_.each(this.fields(),function(field){var _view;return _view=new HR.GenericInputView({field:field}),fields_container.push(_view.render().el),this.add_subview(_view),this.subViews.push(_view)},this),this.schoolView||(this.schoolView=new HR.SettingsNetworkView({model:HR.util.getNetworkTypes("school"),parent:this.parent})),this.companyView||(this.companyView=new HR.SettingsNetworkView({model:HR.util.getNetworkTypes("company"),parent:this.parent})),this.consentView||(this.consentView=new HR.GenericInputView({field:{type:"checkbox",label:"Yes, I'm interested in getting connected with companies.",slug:"jobs_consent",disclaimer:"We will NEVER share your details with any third party entity unless you approve us to do so.",checked:"true"===this.model.get("jobs_consent")||this.model.get("jobs_consent")===!0,onChange:function(_this){return function(new_value,old_value){return hr_metrics.track("ChangeJobsConsent","Settings",{attribute1:new_value,attribute2:old_value})}}(this),model:this.model}})),fields_container.splice(2,0,this.schoolView.render().el),fields_container.splice(3,0,this.companyView.render().el),fields_container.splice(4,0,this.consentView.render().el),this.add_subview(this.schoolView),this.subViews.push(this.schoolView),this.add_subview(this.companyView),this.subViews.push(this.companyView),this.add_subview(this.consentView),this.subViews.push(this.consentView),this.$(".js-fields-wrapper").append(fields_container),this},SettingsProfileView.prototype.destroy=function(){return this.$("#country").select2("close"),SettingsProfileView.__super__.destroy.call(this)},SettingsProfileView.prototype.setupCountrySelect=function(){return $(this.el).find("#country").select2(HR.util.country_select2_options),this.setCountry(this.model.get("country")||"--")},SettingsProfileView.prototype.getCountry=function(){return $(this.el).find("#country").val()},SettingsProfileView.prototype.setCountry=function(country){return $(this.el).find("#country").val(country),$(this.el).find("#s2id_country .select2-choice span").text(country)},SettingsProfileView.prototype.saveChanges=function(e){var data,that;return that=this,data=this.getData(),_.each(data,function(val,field){return"secondary-email-input"!==field?that.model.set(field,val,{silent:!0}):void 0}),this.parent.saveModel(this.model),this.render(),hr_metrics.track("SaveSettings","Profile")},SettingsProfileView.prototype.isUpdated=function(){var changed,data,that;return that=this,data=this.getData(),changed=!1,_.each(data,function(val,field){return"country"===field?that.model.get(field)||"--"===val||(changed=!0):!that.model.get(field)&&val&&(changed=!0),that.model.get(field)&&null!=val&&that.model.get(field)!==val?changed=!0:void 0}),changed},SettingsProfileView.prototype.getData=function(){var data;return data={personal_first_name:this.$("input#personal_first_name").val(),personal_last_name:this.$("input#personal_last_name").val(),country:this.$("input#country").val(),address:this.$("#address").val()}},SettingsProfileView.prototype.updateName=function(e,data){return this.model.set("name",data.model.name)},SettingsProfileView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsProfileView=SettingsProfileView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsTeamsView,ref;return SettingsTeamsView=function(superClass){function SettingsTeamsView(){return SettingsTeamsView.__super__.constructor.apply(this,arguments)}return extend(SettingsTeamsView,superClass),SettingsTeamsView.prototype.template="settings-team",SettingsTeamsView.prototype.className="settings-team-view",SettingsTeamsView.prototype.initialize=function(options){return this.parent=options.parent,this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.teams=new HR.TeamsCollection,this.listenTo(this.teams,"reset",this.render),this.listenTo(this.teams,"sync",this.render),this.teams.fetch()},SettingsTeamsView.prototype.events={"click button.remove":"removeTeam"},SettingsTeamsView.prototype.render=function(){return $(this.el).html(HR.appController.template(this.template,this)({teams:this.teams,hacker:this.model})),this},SettingsTeamsView.prototype.removeTeam=function(e){var dialog,that;if(!$(e.currentTarget).hasClass("disabled"))return $(e.currentTarget).addClass("disabled"),that=this,dialog=HR.util.ShowConfirmationDialog({title:"Confirm "+("Delete"===$(e.currentTarget).html()?"Deletion":"Removal"),body:"Are you sure?",onDestroy:function(){return $(e.currentTarget).removeClass("disabled")},buttons:[{name:"Yes",callback:function(dialog){var btn,team,team_id;return btn=this,this.setInactive(),$(e.currentTarget).addClass("disabled"),team_id=$(e.currentTarget).attr("data-id"),team=that.teams.get(team_id),team.destroy({success:function(model,resp,options){return resp.status===!1?$(".removal-msg").text(resp.errors._global):($(e.currentTarget).html("Delete"===$(e.currentTarget).html()?"Deleting":"Removing"),that.render())}}),dialog.destroy()}},{name:"No",callback:function(dialog){return this.setInactive(),dialog.destroy()}}]}),dialog.render()},SettingsTeamsView.prototype.saveChanges=function(e){return hr_metrics.track("SaveSettings","Team")},SettingsTeamsView.prototype.isUpdated=function(){return!1},SettingsTeamsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsTeamsView=SettingsTeamsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,SettingsView,ref;return SettingsView=function(superClass){function SettingsView(){return SettingsView.__super__.constructor.apply(this,arguments)}return extend(SettingsView,superClass),SettingsView.prototype.template="settings",SettingsView.prototype.className="settings-view",SettingsView.prototype.initialize=function(options){return this.listenTo(this.model,"reset",this.render),this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"reset",this.updateAvatar),this.listenTo(this.model,"sync",this.updateAvatar),this.model.set("avatar_url",void 0),this.tab=options.tab,this.subview=null},SettingsView.prototype.initializeSubView=function(){return"teams"===this.tab?this.subview=new HR.SettingsTeamsView({model:this.model,parent:this}):"email-preferences"===this.tab?this.subview=new HR.SettingsEmailPreferencesNewView({model:HR.model("email-preferences",{username:this.model.get("username")}).cached(),profile:this.model,settings:{all:!0,include:[],submit_button:!1,no_button:!1,auto_save:!1,sub_view:!1,optout:!0},parent:this}):"change-password"===this.tab?this.subview=new HR.SettingsChangePasswordView({model:this.model,parent:this}):"account"===this.tab?this.subview=new HR.SettingsAccountView({model:this.model,parent:this}):"campus-rep-program"===this.tab?this.subview=new HR.SettingsCampusRepProgramView({model:this.model,parent:this}):"bio"===this.tab?this.subview=new HR.SettingsBioView({model:this.model,parent:this}):"shipping-details"===this.tab?this.subview=new HR.SettingsPrizesView({model:this.model,parent:this}):"language"===this.tab?this.subview=new HR.SettingsLanguageView({model:this.model,parent:this}):this.subview=new HR.SettingsProfileView({model:this.model,parent:this})},SettingsView.prototype.events={"click button#save-btn":"delegateSave","click button#use-webcam":"useWebcam","click button#upload-avatar":"uploadAvatar","click a#account":"checkUpdated","click a#profile":"checkUpdated","click a#teams":"checkUpdated","click a#change-password":"checkUpdated","click a#email-preferences":"checkUpdated","click a#campus-rep-program":"checkUpdated","click a#school":"checkUpdated","click a#company":"checkUpdated"},SettingsView.prototype.checkUpdated=function(e){var dialog,href,that;return href=$(e.currentTarget).attr("href"),href.endsWith(this.tab)?!1:(that=this,this.subview.isUpdated()?(dialog=new HR.util.ShowConfirmationDialog({title:"Unsaved Changes",body:"<p>You have unsaved changes. Would you like to save ?</p>",analytics:"SettingsCloseConfirmationDialog",buttons:[{name:"Save","class":"hr_secondary-btn hr-dialog-button",callback:function(dialog){return dialog.destroy(),that.delegateSave(e),HR.router.navigate(href,!0),hr_metrics.track("Click","SettingsConfirmationDialog",{attribute1:$(e.currentTarget).attr("id"),attribute2:"Save"})}},{name:"Discard","class":"hr_primary-btn hr-dialog-button",callback:function(dialog){return dialog.destroy(),HR.router.navigate(href,!0),hr_metrics.track("Click","SettingsConfirmationDialog",{attribute1:$(e.currentTarget).attr("id"),attribute2:"Discard"})}}]}),dialog.render(),!1):void 0)},SettingsView.prototype.settingsSaveMsg=function(message){return null==message&&(message=""),$(".settings_save").html(message)},SettingsView.prototype.hideSaveSuccess=function(){return this.$("#save-success").hide()},SettingsView.prototype.showSavingMsg=function(){return this.settingsSaveMsg("Saving..."),this.hideSaveSuccess(),this.disableSave()},SettingsView.prototype.saveCallback=function(message){return null==message&&(message=""),$("#save-success").html(message),$("#save-success").show(),this.settingsSaveMsg("Save Changes"),this.enableSave()},SettingsView.prototype.disableSave=function(){return $(".settings_save").attr("disabled","disabled")},SettingsView.prototype.enableSave=function(){return $(".settings_save").removeAttr("disabled")},SettingsView.prototype.saveModel=function(model){var that;return this.showSavingMsg(),that=this,model.save(null,{success:function(){return that.saveCallback("Changes saved")},error:function(){return that.saveCallback("There was some error while saving your data. Please try again.")}})},SettingsView.prototype.delegateSave=function(e){return e.preventDefault(),this.subview.isUpdated()?this.subview.saveChanges(e):this.saveCallback("Changes saved")},SettingsView.prototype.setupTabs=function(){var that;return that=this,this.$(".hr_settingsToggle").removeClass("current"),this.$("#"+this.tab+".hr_settingsToggle").addClass("current")},SettingsView.prototype.render=function(){var _next,options,that;return that=this,$(this.el).html(HR.appController.template(this.template,this)({model:this.model.toJSON(),enable_follow_settings:this.enable_follow_settings})),this.model.id?(null===this.subview&&this.initializeSubView(),this.setupTabs(),0===_.size(this.model.toJSON())?this:(this.assign({"article#settings-subview":this.subview}),this)):(_next=Backbone.history.fragment,options={show_signup_up_link:!0,success_callback:function(){return HR.router.navigate(_next,!0)}},this.login_dialog||(this.login_dialog=new HR.util.ShowLoginDialog(options)),this.login_dialog.render(),this)},SettingsView.prototype.updateAvatar=function(){return this.$("#img-avatar").attr("src",this.model.get("avatar"))},SettingsView.prototype.useWebcam=function(){return this.getAvatar({services:["WEBCAM"],openTo:"WEBCAM"})},SettingsView.prototype.uploadAvatar=function(){return this.getAvatar({services:["COMPUTER","URL","FACEBOOK","PICASA","BOX","GOOGLE_DRIVE","DROPBOX"]})},SettingsView.prototype.getAvatar=function(_options){var _onSuccess,default_options,options,that;return null==_options&&(_options={}),that=this,_onSuccess=function(FPFile){var view;return view=new HR.CropImageView({FPFile:FPFile,parent:that,hacker:that.model}),view.render()},default_options={mimetypes:["image/*"]},options=$.extend(default_options,_options),filepicker.pick(options,_onSuccess)},SettingsView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.SettingsView=SettingsView})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerUnsubscribeModel;return HackerUnsubscribeModel=function(superClass){function HackerUnsubscribeModel(){return HackerUnsubscribeModel.__super__.constructor.apply(this,arguments)}return extend(HackerUnsubscribeModel,superClass),HackerUnsubscribeModel.prototype.url=function(){return"/rest/hackers/"+this.get("hacker_id")+"/unsubscription_preferences/"+this.get("unsubscription_preference_id")+"/unsubscribe"},HackerUnsubscribeModel.prototype.setHackerId=function(hacker_id){this.hacker_id=hacker_id},HackerUnsubscribeModel.prototype.setAuthKey=function(auth_key){this.auth_key=auth_key},HackerUnsubscribeModel.prototype.getUrlParams=function(){return"auth_key="+this.get("auth_key")+"&entity_id="+this.get("entity_id")},HackerUnsubscribeModel.prototype.fetch=function(options){return null==options&&(options={}),this.get("hacker_id")&&this.get("auth_key")&&(options=_.extend({url:this.url()+"?"+this.getUrlParams()},options)),HackerUnsubscribeModel.__super__.fetch.call(this,options)},HackerUnsubscribeModel}(window.HR.GenericModel),HR=window.HR,HR.HackerUnsubscribeModel=HackerUnsubscribeModel})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var HR,HackerUnsubscriptionCollection,ref;return HackerUnsubscriptionCollection=function(superClass){function HackerUnsubscriptionCollection(){return HackerUnsubscriptionCollection.__super__.constructor.apply(this,arguments)}return extend(HackerUnsubscriptionCollection,superClass),HackerUnsubscriptionCollection.prototype.model=window.HR.HackerUnsubscribeModel,HackerUnsubscriptionCollection.prototype.initialize=function(options){return null==options&&(options={}),this.hacker_id=options.hacker_id,this.params=options.params},HackerUnsubscriptionCollection.prototype.url=function(){return this.hacker_id&&this.params?"/rest/hackers/"+this.hacker_id+"/unsubscription_preferences/unsubscribe?"+$.param(this.params):"/rest/hackers/me/unsubscription_preferences"},HackerUnsubscriptionCollection.prototype.unsubscribed_values=function(){return _.filter(this.toJSON(),function(x){return x.value===!1})},HackerUnsubscriptionCollection}(window.HR.GenericCollection),HR=null!=(ref=window.HR)?ref:{},HR.HackerUnsubscriptionCollection=HackerUnsubscriptionCollection})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;jQuery(function(){var GenericInputView,HR,ref;return GenericInputView=function(superClass){function GenericInputView(){return GenericInputView.__super__.constructor.apply(this,arguments)}return extend(GenericInputView,superClass),GenericInputView.prototype.className="generic-input-view",GenericInputView.prototype.initialize=function(options){return null==options&&(options={}),this.field=options.field},GenericInputView.prototype.render=function(){var base,events,templates;return templates={},events={},templates.text='<div class="formgroup horizontal <% if (field.required) { %>input-required<% } %> <% if (field.wrapper_add_class) { %><%- field.wrapper_add_class %><% } %>">\n  <div class="block span10">\n    <label for="<%- field.slug %>"><%- field.label %><% if (field.required) { %><span class="required-indicator">*</span><% } %>\n      <% if (field.hint) { %>\n        <span class="sub-help <% if (field.hint.length>50) { %>hint-block<% } %>">(<%- field.hint %>)</span>\n      <% } %>\n    </label>\n    <div class="input-v2-wrapper">\n      <input class="input-v2 <% if (field.required) { %>required<% } %> <% if (field.add_class) { %><%- field.add_class %><% } %>" id="<%- field.slug %>"\n        <% if (field.disabled) { %>disabled="disabled"<% } %>\n        value="<% if (field.value) {\n          %><%- field.value %><% } %>"\n        <% if (field.placeholder) { %> placeholder="<%- field.placeholder %>"<% } %>\n        type="text" data-analytics="GenericInput"\n        data-attr1="<%- field.slug %>" data-attr2="text" >\n      <img class="input-v2-loader-image hide"\n        src="<%- asset_path(\'ajax-view-loader.gif\') %>">\n      <i class="icon--single icon-ok-circled\n        input-v2-state-icon-font hide"></i>\n      <i class="icon--single icon-minus-circled\n        input-v2-state-icon-font hide"\n        style="color: red;"></i>\n    </div>\n    <div class="sub-help input-v2-error"></div>\n  </div>\n</div>',events.text={},events.text.bootstrap=function(_this){return function(){var changed,old_value;return old_value=_this.field.value,changed=!1,_this.$("input").keyup(function(e){return _this.timer&&clearTimeout(_this.timer),_this.$(".input-v2-error").html("").hide(),_this.$(".icon-ok-circled").addClass("hide"),_this.$(".icon-minus-circled").addClass("hide"),_this.$(".input-v2-loader-image").addClass("hide"),_this.$(e.currentTarget).removeClass("errored"),(old_value||"")===_this.$(e.currentTarget).val()?(changed=!1,_this.$(e.currentTarget).removeClass("changed")):_this.field.required&&old_value&&!_this.$(e.currentTarget).val()?(changed=!1,_this.$(e.currentTarget).removeClass("changed"),_this.$(e.currentTarget).addClass("errored")):(changed=!0,_this.$(e.currentTarget).addClass("changed"))}),_this.$("input").focusout(function(e){var new_value,options;if(changed){if(options={},options.success=function(data){return _this.$(".input-v2-loader-image").addClass("hide"),changed=!1,$(e.currentTarget).removeClass("changed"),old_value=$(e.currentTarget).val(),data.model&&data.model.errors[_this.field.slug]?($(e.currentTarget).addClass("errored"),_this.$(".input-v2-error").html(_.escape(data.model.errors[_this.field.slug])||"Error Occured! Please try again!").show(),_this.$("input").val(data.model[_this.field.slug]),_this.$(".icon-minus-circled").removeClass("hide")):(_this.$(".icon-ok-circled").removeClass("hide"),_this.timer=setTimeout(function(){return _this.$(".icon-ok-circled").addClass("hide")},1500),_this.field.success_callback?_this.field.success_callback(_this,data):void 0)},options.error=function(err_msg){return _this.$(".input-v2-loader-image").addClass("hide"),$(e.currentTarget).removeClass("changed"),$(e.currentTarget).addClass("errored"),_this.$(".icon-minus-circled").removeClass("hide"),_this.$(".input-v2-error").html(err_msg||"Error Occured! Please try again!").show()},new_value=$(e.currentTarget).val(),!_this.field.disable_autosave)return _this.$(".input-v2-loader-image").removeClass("hide"),_this.field.model.persist(_this.field.slug,new_value,options)}else if(_this.field.required&&!$(e.currentTarget).val())return _this.$(e.currentTarget).addClass("errored"),_this.$(".icon-minus-circled").removeClass("hide")})}}(this),templates.textarea='<div class="formgroup horizontal <% if (field.required) { %>input-required<% } %> <% if (field.wrapper_add_class) { %><%- field.wrapper_add_class %><% } %>">\n  <div class="block span10">\n    <label for="<%- field.slug %>"><%- field.label %><% if (field.required) { %><span class="required-indicator">*</span><% } %>\n      <% if (field.hint) { %>\n        <span class="sub-help">(<%- field.hint %>)</span>\n      <% } %>\n    </label>\n    <div class="input-v2-wrapper">\n      <textarea class="input-v2 <% if (field.required) { %>required<% } %> <% if (field.add_class) { %><%- field.add_class %><% } %>" id="<%- field.slug %>"\n        data-analytics="GenericInput" <% if (field.maxlength) { %> maxlength="<%- field.maxlength %>" <% } %>\n        data-attr1="<%- field.slug %>" data-attr2="text" ><% if (field.value) {\n         %><%- field.value %><% } %></textarea>\n      <img class="input-v2-loader-image hide"\n        src="<%- asset_path(\'ajax-view-loader.gif\') %>">\n      <i class="icon--single icon-ok-circled\n        input-v2-state-icon-font hide"></i>\n      <i class="icon--single icon-minus-circled\n        input-v2-state-icon-font hide"\n        style="color: red;"></i>\n      <% if (field.maxlength) { %>\n        <div class="pull-right fnt-sz-small" id="text-remaining-chars">\n          <% if (field.value) { %>\n            <%- (field.maxlength - field.value.length) %> characters remaining\n          <% } else {%>\n            <%- field.maxlength %> characters remaining\n          <% } %>\n        </div>\n      <% } %>\n    </div>\n    <div class="sub-help input-v2-error"></div>\n  </div>\n</div>',
events.textarea={},events.textarea.bootstrap=function(_this){return function(){var changed,old_value;return old_value=_this.field.value,changed=!1,_this.$("textarea").keyup(function(e){return _this.timer&&clearTimeout(_this.timer),_this.$(".input-v2-error").html("").hide(),_this.$(".icon-ok-circled").addClass("hide"),_this.$(".icon-minus-circled").addClass("hide"),_this.$(".input-v2-loader-image").addClass("hide"),_this.$(e.currentTarget).removeClass("errored"),(old_value||"")===$(e.currentTarget).val()?(changed=!1,$(e.currentTarget).removeClass("changed")):(changed=!0,$(e.currentTarget).addClass("changed"))}),_this.$("textarea").focusout(function(e){var new_value,options;return changed&&(options={},options.success=function(){return _this.$(".input-v2-loader-image").addClass("hide"),_this.$(".icon-ok-circled").removeClass("hide"),changed=!1,$(e.currentTarget).removeClass("changed"),old_value=$(e.currentTarget).val(),_this.timer=setTimeout(function(){return _this.$(".icon-ok-circled").addClass("hide")},1500)},options.error=function(err_msg){return _this.$(".input-v2-loader-image").addClass("hide"),$(e.currentTarget).removeClass("changed"),$(e.currentTarget).addClass("errored"),_this.$(".icon-minus-circled").removeClass("hide"),_this.$(".input-v2-error").html(err_msg||"Error Occured! Please try again!").show()},new_value=$(e.currentTarget).val(),!_this.field.disable_autosave)?(_this.$(".input-v2-loader-image").removeClass("hide"),_this.field.model.persist(_this.field.slug,new_value,options)):void 0})}}(this),templates.checkbox='<div class="formgroup horizontal <% if (field.wrapper_add_class) { %><%- field.wrapper_add_class %><% } %>">\n  <div class="block span10">\n    <div class="input-v2-wrapper">\n      <div class="block msT msB msR position-relative" <% if (field.inline) { %> style="display: inline-block;" <% } %>>\n        <div class="icheck-overlay hide"></div>\n        <input id="<%- field.slug %>" type="checkbox"\n          <% if (field.checked) { %>checked<% } %>\n          class="hidden-checkbox <% if (field.add_class) { %><%- field.add_class %><% } %>" data-analytics="GenericInput"\n          data-attr1="<%- field.slug %>" data-attr2="checkbox" />\n      </div>\n      <label for="<%- field.slug %>" <% if (field.inline) { %> style="display: inline-block; vertical-align: top;" <% } %>>\n        <%- field.label %><img class="input-v2-checkbox-loader-image hide position-relative"\n          src="<%- asset_path(\'ajax-view-loader.gif\') %>">\n        <i class="icon--single icon-ok-circled\n          input-v2-checkbox-state-icon-font hide"></i>\n        <i class="icon--single icon-minus-circled\n          input-v2-checkbox-state-icon-font hide"\n          style="color: red;"></i>\n        <div class="sub-help input-v2-checkbox-error"></div>\n      </label>\n      <% if (field.disclaimer) { %>\n        <span class="aside msT mlB fnt-sz-small"><%- field.disclaimer %></span>\n      <% } %>\n    </div>\n  </div>\n</div>',events.checkbox={},events.checkbox.bootstrap=function(_this){return function(){var onChangeEvent,onRevertEvent;return _this.$("input[type=checkbox].hidden-checkbox").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"}),onRevertEvent=function(old_value,new_value){return _this.field.onChange&&_this.field.onChange(old_value,new_value),old_value?_this.$("input[type=checkbox].hidden-checkbox").iCheck("check",function(){return _this.disabled=!1,_this.$(".icheck-overlay").addClass("hide")}):_this.$("input[type=checkbox].hidden-checkbox").iCheck("uncheck",function(){return _this.disabled=!1,_this.$(".icheck-overlay").addClass("hide")})},onChangeEvent=function(new_value,old_value){var options;return _this.disabled=!0,_this.$(".icheck-overlay").removeClass("hide"),_this.field.onChange&&_this.field.onChange(new_value,old_value),_this.timer&&clearTimeout(_this.timer),_this.$(".input-v2-checkbox-error").html("").hide(),_this.$(".icon-ok-circled").addClass("hide"),_this.$(".icon-minus-circled").addClass("hide"),options={},options.success=function(){return _this.$(".input-v2-checkbox-loader-image").addClass("hide"),_this.$(".icon-ok-circled").removeClass("hide"),_this.timer=setTimeout(function(){return _this.$(".icon-ok-circled").addClass("hide")},1500),_this.disabled=!1,_this.$(".icheck-overlay").addClass("hide")},options.error=function(err_msg){return _this.$(".input-v2-checkbox-loader-image").addClass("hide"),_this.$(".icon-minus-circled").removeClass("hide"),_this.$(".input-v2-checkbox-error").html(err_msg||"Error Occured! Please try again!").show(),onRevertEvent(old_value,new_value)},_this.field.disable_autosave?void 0:(_this.$(".input-v2-checkbox-loader-image").removeClass("hide"),_this.field.model.persist(_this.field.slug,new_value,options))},_this.$("input[type=checkbox].hidden-checkbox").on("ifChecked",function(e){return _this.disabled?void 0:onChangeEvent(!0,!1)}),_this.$("input[type=checkbox].hidden-checkbox").on("ifUnchecked",function(e){return _this.disabled?void 0:onChangeEvent(!1,!0)})}}(this),templates.select2='<div class="formgroup horizontal <% if (field.required) { %>input-required<% } %> <% if (field.wrapper_add_class) { %><%- field.wrapper_add_class %><% } %>">\n  <div class="block span10">\n    <label for="<%- field.slug %>"><%- field.label %><% if (field.required) { %><span class="required-indicator">*</span><% } %>\n      <% if (field.hint) { %>\n        <span class="sub-help <% if (field.hint.length>50) { %>hint-block<% } %>" >(<%- field.hint %>)</span>\n      <% } %>\n    </label>\n    <div class="input-v2-wrapper">\n      <input class="input-v2 <% if (field.required) { %>required<% } %> <% if (field.add_class) { %><%- field.add_class %><% } %>" id="<%- field.slug %>"\n      value="<% if (field.value) {\n        %><%- field.value %><% } %>"\n      type="text"  data-analytics="GenericInput"\n        data-attr1="<%- field.slug %>" data-attr2="select2" >\n      <img class="input-v2-select2-loader-image hide"\n        src="<%- asset_path(\'ajax-view-loader.gif\') %>">\n      <i class="icon--single icon-ok-circled\n        input-v2-select2-state-icon-font hide"></i>\n      <i class="icon--single icon-minus-circled\n        input-v2-select2-state-icon-font hide"\n        style="color: red;"></i>\n    </div>\n    <div class="sub-help input-v2-error"></div>\n  </div>\n</div>',events.select2={},events.select2.bootstrap=function(_this){return function(){var old_value;return old_value=_this.field.value||"",_this.$("input#"+_this.field.slug).select2(_this.field.select2_options),_this.field.value&&(_this.$("input#"+_this.field.slug).val(_this.field.value),_this.$("#s2id_"+_this.field.slug+" .select2-choice span").text(_this.field.value)),_this.$("input#"+_this.field.slug).on("change",function(resp,added,removed){var new_value,options;return old_value===resp.val||(_this.$(".input-v2-select2-loader-image").addClass("hide"),_this.$(".icon-minus-circled").addClass("hide"),_this.$(".icon-ok-circled").addClass("hide"),_this.$(".input-v2-error").html("").hide(),_this.$("#s2id_"+_this.field.slug+" .select2-choice").removeClass("changed"),_this.$("#s2id_"+_this.field.slug+" .select2-choice").removeClass("errored"),_this.$("#s2id_"+_this.field.slug+" .select2-choice").parent().removeClass("error"),_this.timer&&clearTimeout(_this.timer),new_value=resp.val,_this.$("#s2id_"+_this.field.slug+" .select2-choice").addClass("changed"),options={},options.success=function(){return _this.$(".input-v2-select2-loader-image").addClass("hide"),_this.$(".icon-ok-circled").removeClass("hide"),_this.$("#s2id_"+_this.field.slug+" .select2-choice").removeClass("changed"),old_value=resp.val,_this.timer=setTimeout(function(){return _this.$(".icon-ok-circled").addClass("hide")},1500)},options.error=function(err_msg){return _this.$(".input-v2-select2-loader-image").addClass("hide"),_this.$("#s2id_"+_this.field.slug+" .select2-choice").removeClass("changed"),_this.$("#s2id_"+_this.field.slug+" .select2-choice").addClass("errored"),_this.$(".icon-minus-circled").removeClass("hide"),_this.$(".input-v2-error").html(err_msg||"Error Occured! Please try again!").show()},_this.field.disable_autosave)?void 0:(_this.$(".input-v2-select2-loader-image").removeClass("hide"),_this.field.model.persist(_this.field.slug,new_value,options))})}}(this),templates.upload='<div class="formgroup horizontal">\n  <div class="block span10">\n    <label for="<%- field.slug %>"><%- field.label %>\n      <% if (field.hint) { %>\n        <span class="sub-help">(<%- field.hint %>)</span>\n      <% } %>\n    </label>\n    <div class="input-v2-upload-wrapper">\n      <a class="btn btn-small no-select download\n        <% if (!field.value) { %>hide<% } %>"\n        href="<% if (field.value) {\n          %><%- field.value %><% } %>"\n        target="_blank" data-analytics="GenericInput"\n        data-attr1="<%- field.slug %>" data-attr2="downloadbtn">\n          <i class="icon--single icon-download"></i> Download\n      </a>\n      <% if (field.preview) { %>\n        <a class="btn btn-small no-select preview\n          <% if (!field.value) { %>hide<% } %>"\n          data-href="<% if (field.value) {\n            %><%- field.value %><% } %>" class="preview-file"\n          data-action="<%- field.preview %>"\n          data-analytics="GenericInput" data-attr1="<%- field.slug %>"\n          data-attr2="previewbtn">\n            <i class="icon--single icon-eye"></i> Preview\n        </a>\n      <% } %>\n      <a class="btn btn-small no-select remove\n        <% if (!field.value) { %>hide<% } %>"\n        data-slug="<%- field.slug %>" data-analytics="GenericInput"\n        data-attr1="<%- field.slug %>" data-attr2="removebtn">\n          <i class="icon--single icon-trash"></i> Remove\n      </a>\n      <a class="btn btn-small no-select upload"\n        data-analytics="GenericInput" data-attr1="<%- field.slug %>"\n        data-attr2="uploadbtn">\n        <i class="icon--single icon-upload"></i> Upload\n      </a>\n      <input class="hide" type="file" id="<%- field.slug %>">\n      <img class="input-v2-upload-loader-image hide"\n        src="<%- asset_path(\'ajax-view-loader.gif\') %>">\n      <i class="icon--single icon-ok-circled\n        input-v2-upload-state-icon-font hide"></i>\n      <i class="icon--single icon-minus-circled\n        input-v2-upload-state-icon-font hide"\n        style="color: red;"></i>\n      <div class="sub-help input-v2-upload-error"></div>\n    </div>\n  </div>\n</div>',events.upload={},events.upload.bootstrap=function(_this){return function(){var persist_options,reset_view;return _this.$(".preview").click(function(e){var data_href,dialog_options;return"gdocs"===$(e.currentTarget).attr("data-action")?(data_href=encodeURIComponent($(e.currentTarget).attr("data-href")),dialog_options={title:_this.field.label,body:"<iframe src='https://docs.google.com/viewer?"+("url="+data_href+"&embedded=true' width='600' ")+"height='780' style='border: none;'></iframe>",width:600,nopadding:!0},new HR.util.ShowDialog(dialog_options,{}).render()):void 0}),reset_view=function(){return _this.$(".input-v2-upload-loader-image").addClass("hide"),_this.$(".icon-minus-circled").addClass("hide"),_this.$(".icon-ok-circled").addClass("hide"),_this.$(".input-v2-upload-error").html("").hide(),_this.timer?clearTimeout(_this.timer):void 0},persist_options={},persist_options.success=function(data){return data&&data.model&&data.model.errors&&(data.model.errors[_this.field.slug]||data.model.errors[_this.field.slug_out])?void persist_options.error(data.model.errors[_this.field.slug]||data.model.errors[_this.field.slug_out]):(_this.$(".input-v2-upload-loader-image").addClass("hide"),_this.$(".icon-ok-circled").removeClass("hide"),_this.timer=setTimeout(function(){return _this.$(".icon-ok-circled").addClass("hide")},1500),data.model[_this.field.slug_out]?(_this.$(".upload").removeAttr("disabled"),_this.$(".download").attr("href",data.model[_this.field.slug_out]).show(),_this.$(".preview").attr("data-href",data.model[_this.field.slug_out]).show(),_this.$(".remove").show()):(_this.$(".remove").removeAttr("disabled"),_this.$(".download").removeAttr("href").hide(),_this.$(".preview").removeAttr("data-href").hide(),_this.$(".remove").hide()))},persist_options.error=function(err_msg){return _this.$(".input-v2-upload-loader-image").addClass("hide"),_this.$(".icon-minus-circled").removeClass("hide"),_this.$(".upload").removeAttr("disabled"),_this.$(".input-v2-upload-error").html(_.escape(err_msg)||"Error Occured! Please try again!").show()},_this.$(".remove").click(function(e){return"disabled"!==_this.$(".remove").attr("disabled")?(_this.$(".remove").attr("disabled","disabled"),reset_view(),_this.field.disable_autosave?void 0:(_this.$(".input-v2-upload-loader-image").removeClass("hide"),_this.field.model.persist(_this.field.slug_out,null,persist_options))):void 0}),_this.$(".upload").click(function(e){return _this.$("input#"+_this.field.slug).click()}),_this.$("input#"+_this.field.slug).change(function(e){var form_data,that;if("disabled"!==_this.$(".upload").attr("disabled"))return _this.$(".upload").attr("disabled","disabled"),e.currentTarget.files[0]?(reset_view(),form_data=new FormData,form_data.append(_this.field.slug,e.currentTarget.files[0]),_this.field.disable_autosave||(_this.$(".input-v2-upload-loader-image").removeClass("hide"),_this.field.model.persist(form_data,$.extend(persist_options,{slug_out:_this.field.slug_out}))),that=_this):void _this.$(".upload").removeAttr("disabled")})}}(this),templates.mkdToolBar="<div class='mkd-container'>\n  <div class='mkd-button-bar'>\n    <ul class='row'>\n      <li class='span1 inactive' title=\"Strong <strong>\">\n       <span id='bold'></span>\n      </li>\n      <li class='span1 inactive' title=\"Emphasis <em>\">\n       <span id='italics'></span>\n      </li>\n      <li class='span1 inactive custom' title=\"Numbered List <om>\">\n        <span id='numberedList'></span>\n      </li>\n      <li class='span1 inactive custom' title=\"Bulleted List <um>\">\n        <span id='bulletedList'></span>\n      </li>\n      <li class='span1 inactive custom' title=\"Image <img>\">\n        <span id='image'></span>\n      </li>\n      <li class='span1 inactive custom' title=\"link\">\n        <span id='link'></span>\n      </li>\n      <li class='span1 inactive custom' title=\"code\">\n        <span id='code'></span>\n      </li>\n      <% if(field.showPreviewButton){ %>\n      <li class='span2 pull-right' style=\"padding-top: 4px;\" >\n        <button class=\"js-preview btn btn-small\">Preview</button>\n      </li>\n      <%}%>\n      <% if(field.helpText && field.helpText.trim() != ''){ %>\n      <span class=\"help-prompt msT pull-right\"><i class=\"icon-help-circled icon-single\"></i><span class=\"help-text\"><%= field.helpText %></span></span>\n      <%}%>\n    </ul>\n  </div>\n  <textarea style=\"display:none;\"></textarea>\n  <div class='loading-editor-msg text-center'>\n    <span>\n      Loading editor...\n    </span>\n  </div>\n</div",events.mkdToolBar={},events.mkdToolBar.bootstrap=function(_this){return function(){var initializeToolBar,that;return that=_this,that.preview=function(e){},that.getEditor=function(){},initializeToolBar=function(){var afterCm,parentView;if(null!=that.markdownHelper){if(null!=that.$el.find(".CodeMirror").get(0))return that.preview=function(e){return that.markdownHelper.preview(e)},that.getEditor=function(){return that.markdownHelper.editor},void $(that.el).find(".loading-editor-msg").hide();$(that.el).html(_.template(templates[that.field.type])({field:that.field}))}return that.field.params.$textarea=that.$el.find("textarea").get(0),$(that.el).find(".loading-editor-msg").hide(),that.markdownHelper=new HR.util.MarkdownToolbarHelper(that.field.params),that.$el.find(".mkd-button-bar li span").click(function(e){return that.markdownHelper._apply(e)}),that.preview=function(e){return that.markdownHelper.preview(e)},that.getEditor=function(){return that.markdownHelper.editor},afterCm=that.field.params.afterCodemirrorLoadCallback,parentView=that.field.params.parentView,setTimeout(function(){return $(that.el).find(".js-preview").click(function(e){return that.markdownHelper.preview(e)}),$(that.el).find(".CodeMirror").click(function(){return that.markdownHelper.editor.focus()}),null!=afterCm&&afterCm.apply(parentView),that.getEditor().on("focus",function(){return that.$el.find(".CodeMirror-scroll").css("max-height","none")})},0)},HR.requires(["codemirror_basic","compound/markdownhelper"],function(){return initializeToolBar()})}}(this),(base=this.field).type||(base.type="text"),$(this.el).html(_.template(templates[this.field.type])({field:this.field})),events[this.field.type]&&events[this.field.type].bootstrap&&events[this.field.type].bootstrap(),this},GenericInputView.prototype.on_focus=function(){var that;return that=this,this.$(".comment-editor").removeClass("comment-editor-not-focused"),_.each([".expert-checkbox",".markdown-hint",".post-button-wrap"],function(el){return that.$(el).show()}),$(".forum-button-bar li").removeClass("inactive")},GenericInputView}(window.HR.GenericView),HR=null!=(ref=window.HR)?ref:{},HR.GenericInputView=GenericInputView})}.call(this),/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 0.11.4
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2012, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function($){function refresh(){var data=prepareData(this);return isNaN(data.datetime)||$(this).text(inWords(data.datetime)),this}function prepareData(element){if(element=$(element),!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());!(text.length>0)||$t.isTime(element)&&element.attr("title")||element.attr("title",text)}return element.data("timeago")}function inWords(date){return $t.inWords(distance(date))}function distance(date){return(new Date).getTime()-date.getTime()}$.timeago=function(timestamp){return inWords(timestamp instanceof Date?timestamp:"string"==typeof timestamp?$.timeago.parse(timestamp):"number"==typeof timestamp?new Date(timestamp):$.timeago.datetime(timestamp))};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction,value=$l.numbers&&$l.numbers[number]||number;return string.replace(/%d/i,value)}var $l=this.settings.strings,prefix=$l.prefixAgo,suffix=$l.suffixAgo;this.settings.allowFuture&&0>distanceMillis&&(prefix=$l.prefixFromNow,suffix=$l.suffixFromNow);var seconds=Math.abs(distanceMillis)/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24,years=days/365,words=45>seconds&&substitute($l.seconds,Math.round(seconds))||90>seconds&&substitute($l.minute,1)||45>minutes&&substitute($l.minutes,Math.round(minutes))||90>minutes&&substitute($l.hour,1)||24>hours&&substitute($l.hours,Math.round(hours))||42>hours&&substitute($l.day,1)||30>days&&substitute($l.days,Math.round(days))||45>days&&substitute($l.month,1)||365>days&&substitute($l.months,Math.round(days/30))||1.5>years&&substitute($l.year,1)||substitute($l.years,Math.round(years)),separator=void 0===$l.wordSeparator?" ":$l.wordSeparator;return $.trim([prefix,words,suffix].join(separator))},parse:function(iso8601){var s=$.trim(iso8601);return s=s.replace(/\.\d+/,""),s=s.replace(/-/,"/").replace(/-/,"/"),s=s.replace(/T/," ").replace(/Z/," UTC"),s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(s)},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601)},isTime:function(elem){return"time"===$(elem).get(0).tagName.toLowerCase()}}),$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;return $s.refreshMillis>0&&setInterval(function(){self.each(refresh)},$s.refreshMillis),self},document.createElement("abbr"),document.createElement("time")}(jQuery);